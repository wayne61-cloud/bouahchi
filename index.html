<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Bouahchi Gor">
    <meta name="theme-color" content="#000000">
    <title>Bouahchi Gor - Fitness Compl√®te</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        html, body {
            width: 100%;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', sans-serif;
            background: #000;
            color: #fff;
            overflow: hidden;
            -webkit-user-select: none;
            user-select: none;
            position: fixed;
        }
        body {
            display: flex;
            flex-direction: column;
            padding: max(env(safe-area-inset-top), 8px) max(env(safe-area-inset-right), 8px) max(env(safe-area-inset-bottom), 8px) max(env(safe-area-inset-left), 8px);
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 48px;
            background: linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 100%);
            border-bottom: 1px solid #222;
            margin: -8px -8px 0 -8px;
            padding: 8px 12px;
            flex-shrink: 0;
            z-index: 50;
        }
        .header-left, .header-right {
            font-size: 11px;
            color: #ff5252;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .header-title {
            font-weight: 800;
            font-size: 14px;
            letter-spacing: 0.5px;
            flex: 1;
            text-align: center;
        }
        .container {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 0;
            -webkit-overflow-scrolling: touch;
            margin-bottom: 56px;
            scroll-behavior: smooth;
        }
        .page {
            display: none;
            width: 100%;
            min-height: 100%;
            padding: 16px 12px 32px 12px;
            animation: fadeIn 0.3s ease-in;
        }
        .page.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .top-nav, .tabs {
            display: flex;
            gap: 6px;
            margin-bottom: 12px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            padding-bottom: 4px;
            scroll-snap-type: x mandatory;
        }
        .top-nav-btn, .tab-btn {
            padding: 8px 14px;
            border: 1px solid rgba(255, 82, 82, 0.3);
            background: rgba(255, 82, 82, 0.08);
            color: #ffcccc;
            border-radius: 20px;
            font-size: 11px;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            flex-shrink: 0;
            scroll-snap-align: start;
            font-weight: 500;
            -webkit-user-select: none;
            user-select: none;
        }
        .top-nav-btn:active, .tab-btn:active {
            transform: scale(0.95);
        }
        .top-nav-btn.active, .tab-btn.active {
            background: linear-gradient(135deg, #ff1744, #ff5252);
            color: #fff;
            border-color: #ff5252;
            box-shadow: 0 2px 8px rgba(255, 23, 68, 0.3);
        }
        .launcher {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: calc(100vh - 180px);
            padding: 20px 0;
        }
        .launcher-top {
            text-align: center;
        }
        .launcher-time {
            font-size: 48px;
            font-weight: 800;
            color: #ff5252;
            margin-bottom: 4px;
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
        }
        .launcher-date {
            font-size: 12px;
            color: #ff8a80;
            margin-bottom: 20px;
            font-weight: 500;
        }
        .launcher-title {
            font-size: 28px;
            font-weight: 900;
            color: #fff;
            margin-bottom: 4px;
            letter-spacing: 1px;
        }
        .launcher-subtitle {
            font-size: 13px;
            color: #ffcccc;
            margin-bottom: 24px;
            font-style: italic;
        }
        .launcher-middle {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .launcher-btn {
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 700;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
            letter-spacing: 0.5px;
            -webkit-user-select: none;
            user-select: none;
        }
        .launcher-btn.primary {
            background: linear-gradient(135deg, #ff1744, #ff5252);
            box-shadow: 0 4px 16px rgba(255, 23, 68, 0.35);
        }
        .launcher-btn.primary:active {
            transform: scale(0.98);
            box-shadow: 0 2px 8px rgba(255, 23, 68, 0.25);
        }
        .launcher-btn.secondary {
            background: rgba(255, 82, 82, 0.12);
            border: 1.5px solid rgba(255, 82, 82, 0.5);
        }
        .launcher-btn.secondary:active {
            background: rgba(255, 82, 82, 0.18);
        }
        .launcher-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 20px;
        }
        .stat {
            padding: 12px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
            border-radius: 10px;
            border: 1px solid rgba(255, 82, 82, 0.2);
            text-align: center;
            font-size: 11px;
            color: #ffcccc;
            font-weight: 500;
        }
        .stat-value {
            font-size: 20px;
            font-weight: 800;
            color: #ff5252;
            margin-top: 4px;
        }
        .section-title {
            font-size: 24px;
            font-weight: 900;
            color: #ff5252;
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }
        .section-sub {
            font-size: 12px;
            color: #ffcccc;
            margin-bottom: 16px;
            font-weight: 500;
        }
        .search-box {
            width: 100%;
            padding: 10px 14px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 82, 82, 0.3);
            border-radius: 10px;
            color: #fff;
            font-size: 13px;
            margin-bottom: 12px;
            outline: none;
            transition: all 0.2s;
            cursor: pointer;
        }
        .search-box:focus {
            background: rgba(255, 255, 255, 0.1);
            border-color: #ff5252;
            box-shadow: 0 0 8px rgba(255, 82, 82, 0.2);
        }
        .search-box::placeholder {
            color: #ff8a80;
        }
        .grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }
        .card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0.01));
            border: 1px solid rgba(255, 138, 128, 0.2);
            border-radius: 12px;
            padding: 14px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        .card:active {
            transform: scale(0.98);
            border-color: rgba(255, 82, 82, 0.4);
        }
        .card.favorited {
            background: linear-gradient(135deg, rgba(255, 82, 82, 0.15), rgba(255, 82, 82, 0.08));
            border-color: rgba(255, 82, 82, 0.4);
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        .card-title {
            font-size: 14px;
            font-weight: 700;
            color: #ff8a80;
            flex: 1;
        }
        .card-fav-btn {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.2s;
            padding: 8px;
            margin: -8px -8px -8px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 44px;
            min-height: 44px;
            -webkit-user-select: none;
            user-select: none;
        }
        .card-fav-btn:active {
            opacity: 1;
            transform: scale(1.15);
        }
        .card-fav-btn.active {
            opacity: 1;
            transform: scale(1.2);
        }
        .recipe-image {
            width: 100%;
            height: 200px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 12px;
            border: 1px solid rgba(255, 138, 128, 0.2);
            background: #1a1a1a;
        }
        .recipe-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        .card-meta {
            font-size: 11px;
            color: #ffcccc;
            margin-bottom: 8px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        .card-text {
            font-size: 11px;
            color: #ffebee;
            margin-bottom: 8px;
            line-height: 1.5;
        }
        .card-section {
            background: rgba(255, 82, 82, 0.1);
            padding: 8px;
            border-radius: 6px;
            border-left: 2px solid #ff5252;
            margin-bottom: 8px;
        }
        .card-section-title {
            font-size: 11px;
            font-weight: 600;
            color: #ff8a80;
            margin-bottom: 4px;
        }
        .card-section-content {
            font-size: 10.5px;
            color: #ffebee;
            line-height: 1.6;
            white-space: pre-wrap;
            word-break: break-word;
        }
        .video-container {
            width: 100%;
            aspect-ratio: 16 / 9;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 8px;
            border: 1px solid rgba(255, 138, 128, 0.2);
            background: #1a1a1a;
        }
        .video-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .card-nav {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(255, 138, 128, 0.2);
        }
        .nav-btn-prev, .nav-btn-next {
            flex: 1;
            padding: 10px;
            border: 1px solid rgba(255, 82, 82, 0.5);
            background: rgba(255, 82, 82, 0.1);
            color: #ff5252;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .nav-btn-prev:active, .nav-btn-next:active {
            transform: scale(0.95);
        }
        .nav-btn-prev:disabled, .nav-btn-next:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        .relax-card {
            background: linear-gradient(135deg, rgba(100, 149, 237, 0.15), rgba(65, 105, 225, 0.08));
            border: 1px solid rgba(100, 149, 237, 0.4);
        }
        .relax-card .card-title {
            color: #6495ed;
        }
        .noushi-card {
            background: linear-gradient(135deg, rgba(255, 87, 34, 0.15), rgba(255, 152, 0, 0.08));
            border: 1px solid rgba(255, 87, 34, 0.4);
        }
        .noushi-card .card-title {
            color: #ff6e40;
        }
        .nav-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 56px;
            background: linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 100%);
            border-top: 1px solid #222;
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 0 -8px -8px -8px;
            padding-bottom: max(env(safe-area-inset-bottom), 4px);
            z-index: 1000;
        }
        .nav-btn {
            flex: 1;
            height: 48px;
            border: none;
            background: none;
            color: #666;
            font-size: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 3px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 0;
            -webkit-user-select: none;
            user-select: none;
        }
        .nav-btn.active {
            color: #ff5252;
            background: rgba(255, 82, 82, 0.1);
        }
        .nav-btn span:first-child {
            font-size: 20px;
        }
        .container::-webkit-scrollbar {
            width: 4px;
        }
        .container::-webkit-scrollbar-thumb {
            background: rgba(255, 82, 82, 0.4);
            border-radius: 2px;
        }
        .container::-webkit-scrollbar-track {
            background: transparent;
        }
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #ffcccc;
        }
        .empty-state-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }
        .empty-state-text {
            font-size: 13px;
        }
        .recipe-nutrition {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 8px;
        }
        .nutrition-item {
            background: rgba(255, 82, 82, 0.08);
            padding: 8px;
            border-radius: 6px;
            border: 1px solid rgba(255, 82, 82, 0.2);
            text-align: center;
            font-size: 10px;
        }
        .nutrition-label {
            color: #ff8a80;
            font-weight: 600;
            display: block;
            margin-bottom: 2px;
        }
        .nutrition-value {
            color: #ffebee;
            font-weight: 700;
            font-size: 11px;
        }
        .ingredient-list {
            background: rgba(255, 255, 255, 0.03);
            padding: 8px;
            border-radius: 6px;
            margin-bottom: 8px;
            border-left: 2px solid #ff5252;
        }
        .ingredient-item {
            font-size: 10.5px;
            color: #ffebee;
            padding: 3px 0;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .ingredient-item:before {
            content: "‚úì";
            color: #ff5252;
            font-weight: 700;
        }
        .step-list {
            background: rgba(255, 255, 255, 0.03);
            padding: 8px;
            border-radius: 6px;
            margin-bottom: 8px;
            border-left: 2px solid #6495ed;
        }
        .step-item {
            font-size: 10.5px;
            color: #ffebee;
            padding: 4px 0;
            display: flex;
            gap: 6px;
        }
        .step-number {
            background: #6495ed;
            color: #000;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            font-weight: 700;
            flex-shrink: 0;
        }
        .step-content {
            flex: 1;
            line-height: 1.4;
            margin-top: 2px;
        }
    </style>
</head>
<body>
<div class="header">
    <div class="header-left"><span id="temp">--</span>¬∞</div>
    <div class="header-title">BOUAHCHI GOR</div>
    <div class="header-right"><span id="battery">--</span>%</div>
</div>
<div class="container">
    <div class="page active" id="home">
        <div class="launcher">
            <div class="launcher-top">
                <div class="launcher-time" id="time">00:00</div>
                <div class="launcher-date" id="date">Mercredi, 28 Janvier</div>
                <div class="launcher-title">BOUAHCHI GOR</div>
                <div class="launcher-subtitle">La montagne n'attend personne</div>
            </div>
            <div class="launcher-middle">
                <button class="launcher-btn primary" onclick="chooseMode('maison')">ENTRA√éNEMENT MAISON</button>
                <button class="launcher-btn primary" onclick="chooseMode('salle')">ENTRA√éNEMENT SALLE</button>
                <button class="launcher-btn primary" onclick="goToPage('nutrition')">NUTRITION</button>
                <button class="launcher-btn primary" onclick="goToPage('noushi')">NOUSHI MODE</button>
                <button class="launcher-btn secondary" onclick="goToPage('relax')">REPOS & RELAXATION</button>
            </div>
            <div class="launcher-stats">
                <div class="stat">
                    <div>Streak</div>
                    <div class="stat-value" id="statStreak">0</div>
                </div>
                <div class="stat">
                    <div>Repas</div>
                    <div class="stat-value" id="statMeals">0</div>
                </div>
                <div class="stat">
                    <div>Sessions</div>
                    <div class="stat-value" id="statSessions">0</div>
                </div>
            </div>
        </div>
    </div>
    <div class="page" id="exos">
        <h1 class="section-title">ENTRA√éNEMENT</h1>
        <p class="section-sub" id="exos-sub">Choisis ton programme</p>
        <div class="top-nav" id="mode-nav"></div>
        <input type="text" class="search-box" id="exos-search" placeholder="Cherche un exercice...">
        <div class="tabs" id="muscle-tabs"></div>
        <div class="grid" id="exos-grid"></div>
    </div>
    <div class="page" id="nutrition">
        <h1 class="section-title">NUTRITION</h1>
        <p class="section-sub">Recettes compl√®tes (2+ mois de vari√©t√©)</p>
        <input type="text" class="search-box" id="recipes-search" placeholder="Cherche une recette...">
        <div class="tabs" id="meal-tabs"></div>
        <div class="grid" id="recipes-grid"></div>
    </div>
    <div class="page" id="noushi">
        <h1 class="section-title">NOUSHI MODE</h1>
        <p class="section-sub">Les exos les plus extr√™mes (6-12 mois de progression)</p>
        <input type="text" class="search-box" id="noushi-search" placeholder="Cherche une exo...">
        <div class="tabs" id="noushi-tabs"></div>
        <div class="grid" id="noushi-grid"></div>
    </div>
    <div class="page" id="relax">
        <h1 class="section-title">RELAXATION</h1>
        <p class="section-sub">R√©cup√©ration compl√®te (yoga, m√©ditation, √©tirement)</p>
        <input type="text" class="search-box" id="relax-search" placeholder="Cherche une s√©ance...">
        <div class="tabs" id="relax-tabs"></div>
        <div class="grid" id="relax-grid"></div>
    </div>
    <div class="page" id="favoris">
        <h1 class="section-title">MES FAVORIS</h1>
        <p class="section-sub">Tes exos et recettes pr√©f√©r√©es</p>
        <div class="grid" id="favoris-grid"></div>
    </div>
</div>
<div class="nav-bottom">
    <button class="nav-btn active" id="navHome" onclick="goToPage('home')"><span>üè†</span><span>Home</span></button>
    <button class="nav-btn" id="navExos" onclick="goToPage('exos')"><span>üí™</span><span>Exos</span></button>
    <button class="nav-btn" id="navFood" onclick="goToPage('nutrition')"><span>üçΩ</span><span>Food</span></button>
    <button class="nav-btn" id="navNoushi" onclick="goToPage('noushi')"><span>üî•</span><span>Noushi</span></button>
    <button class="nav-btn" id="navRelax" onclick="goToPage('relax')"><span>üßò‚Äç‚ôÇÔ∏è</span><span>Relax</span></button>
    <button class="nav-btn" id="navFavoris" onclick="goToPage('favoris')"><span>‚≠ê</span><span>Favoris</span></button>
</div>

<script>
const YOUTUBE_VIDEOS = {
    'Pompes classiques': 'https://www.youtube.com/embed/y68UkKWkh08',
    'Pompes inclin√©es': 'https://www.youtube.com/embed/rtqbRn5tqrs',
    'Pompes d√©clin√©es': 'https://www.youtube.com/embed/1eccZxpmRsk',
    'Pompes serr√©es': 'https://www.youtube.com/embed/REjGhqa-63E',
    'Pompes explosives': 'https://www.youtube.com/embed/zGmCCtt2R48',
    'Pompes large √©cart': 'https://www.youtube.com/embed/mbdJlPnIhXQ',
    'Dips sur chaise': 'https://www.youtube.com/embed/PjVF-FF8JkU',
    'Curl √©lastique': 'https://www.youtube.com/embed/2KzSMYRXB-8',
    'Pompes triceps mur': 'https://www.youtube.com/embed/6q6OhfP33bk',
    'Dips sol chevilles': 'https://www.youtube.com/embed/bO5zK8AKkI4',
    'Punch en l\'air': 'https://www.youtube.com/embed/fRrQLI8pBLU',
    'Squat poids corps': 'https://www.youtube.com/embed/hNOGNlTKIYg',
    'Fentes avant': 'https://www.youtube.com/embed/1Ac8Z0RyDX4',
    'Fentes arri√®re': 'https://www.youtube.com/embed/7FADlBI9H_4',
    'Hip thrust canap√©': 'https://www.youtube.com/embed/RR0oZhhUVWo',
    'Squats pistol progression': 'https://www.youtube.com/embed/vq5-vdgJc0I',
    'Sauts box poids corps': 'https://www.youtube.com/embed/YwlXzR6txd8',
    'Planche classique': 'https://www.youtube.com/embed/b7LmuXITeVM',
    'Crunch au sol': 'https://www.youtube.com/embed/ylepxaWA0ng',
    'Planche lat√©rale': 'https://www.youtube.com/embed/fIkpxa-kuIA',
    'Relever jambes sol': 'https://www.youtube.com/embed/ECSl36lXRB0',
    'Bicycle crunch': 'https://www.youtube.com/embed/VaL7XWK3MVE',
    'Superman au sol': 'https://www.youtube.com/embed/dmaDOON5JBU',
    'Rowing √©lastique': 'https://www.youtube.com/embed/BI647VkG0iY',
    'Bird dog': 'https://www.youtube.com/embed/k2azbhhuKuM',
    'Squat barre': 'https://www.youtube.com/embed/J_Zm4XvE__s',
    'Presse cuisses': 'https://www.youtube.com/embed/h5NxegwgEkU',
    'Leg curl allong√©': 'https://www.youtube.com/embed/SbSNUXPRkc8',
    'Leg extension': 'https://www.youtube.com/embed/4ZDm5EbiFI8',
    'Fente barre salle': 'https://www.youtube.com/embed/VQoCfxPNpiU',
    'Hack squat machine': 'https://www.youtube.com/embed/u_1a0nWG7vQ',
    'D√©velopp√© couch√© barre': 'https://www.youtube.com/embed/SngodvMU0JA',
    'D√©velopp√© inclin√© barre': 'https://www.youtube.com/embed/RQ7U42i2DH4',
    'D√©velopp√© couch√© halt√®res': 'https://www.youtube.com/embed/UKSxlfZ9dm8',
    '√âcart√©s machine pec deck': 'https://www.youtube.com/embed/DtiDEA-UqwA',
    '√âcart√©s inclin√©s halt√®res': 'https://www.youtube.com/embed/FXr_JS4yVdA',
    'Push up d√©clin√© barre': 'https://www.youtube.com/embed/QBlYp-EwHlo',
    'Tractions large': 'https://www.youtube.com/embed/eGo4IYlbE5g',
    'Rowing barre': 'https://www.youtube.com/embed/_W377Z_TPxs',
    'Rowing halt√®res unilat√©ral': 'https://www.youtube.com/embed/10FJPoDm9gw',
    'Tirage vertical': 'https://www.youtube.com/embed/2Y4N2KoFg08',
    'Pull-over poulie': 'https://www.youtube.com/embed/nGOUrdqpwNs',
    'Rowing machine': 'https://www.youtube.com/embed/ij4095Oo1BA',
    'D√©velopp√© √©paules halt√®res': 'https://www.youtube.com/embed/CE9KiCPFw0E',
    '√âl√©vations lat√©rales halt√®res': 'https://www.youtube.com/embed/DC8ceKPj4TM',
    'Oiseau halt√®res inclin√©': 'https://www.youtube.com/embed/CqfSOJcvo04',
    '√âl√©vations frontales halt√®res': 'https://www.youtube.com/embed/B4KaLoOXl0Q',
    'Crunch poulie': 'https://www.youtube.com/embed/_z8OvPOl4yc',
    'Ab wheel rollout': 'https://www.youtube.com/embed/A3uK5TPzHq8',
    'Relev√©s jambes barre': 'https://www.youtube.com/embed/LxNxg8VATOg',
    'One Arm Pull-up': 'https://www.youtube.com/embed/zoOC1BIriAU',
    'Muscle Up': 'https://www.youtube.com/embed/dgJsU_JWD_w',
    'Front Lever Hold': 'https://www.youtube.com/embed/srMJ0FvF-6s',
    'Handstand Push-up': 'https://www.youtube.com/embed/qbRbM6d5ddM',
    'Pistol Squat (1 jambe)': 'https://www.youtube.com/embed/snNPOu6KeAI',
};

const EXOS = [
    { nom: 'Pompes classiques', pole: 'maison', muscle: 'poitrine', desc: 'Fondamental poids du corps', prep: 'Mains largeur √©paules, corps droit, descendre 2-3cm sol, remonter explosif. 3x10-15 reps.', tips: 'Core engag√©, pas de creusement dos.' },
    { nom: 'Pompes inclin√©es', pole: 'maison', muscle: 'poitrine', desc: 'Pour d√©butants', prep: 'Mains surface √©lev√©e (chaise), m√™me technique. 3x8-12 reps', tips: 'Progression vers pompes normales.' },
    { nom: 'Pompes d√©clin√©es', pole: 'maison', muscle: 'poitrine', desc: 'Pectoraux hauts', prep: 'Pieds sur√©lev√©s, mains sol. 3x6-10 reps', tips: 'Sollicite haut poitrine.' },
    { nom: 'Pompes serr√©es', pole: 'maison', muscle: 'bras', desc: 'Focus triceps', prep: 'Mains rapproch√©es, coudes pr√®s corps. 3x8-12 reps', tips: 'Triceps br√ªlent.' },
    { nom: 'Pompes explosives', pole: 'maison', muscle: 'poitrine', desc: 'Pliom√©trique puissance', prep: 'Pompes rapides, applaudir si possible. 3x5-8 reps.', tips: 'Progresser d\'abord avec normales.' },
    { nom: 'Pompes large √©cart', pole: 'maison', muscle: 'poitrine', desc: 'Pectoraux isolement', prep: 'Mains tr√®s √©cart√©es (1.5x √©paules). 3x10-12 reps', tips: '√âtirement pec maximal.' },
    { nom: 'Dips sur chaise', pole: 'maison', muscle: 'bras', desc: 'Triceps intense', prep: 'Mains chaise derri√®re, pieds devant, plier 90¬∞. 3x8-12 reps', tips: 'Contr√¥ler descente.' },
    { nom: 'Curl √©lastique', pole: 'maison', muscle: 'bras', desc: 'Biceps isolement', prep: '√âlastique sous pieds, flexion bras. 3x12-15 reps', tips: 'Tension constante.' },
    { nom: 'Pompes triceps mur', pole: 'maison', muscle: 'bras', desc: 'Triceps approche mur', prep: 'Face mur, pompes en arri√®re angle 45¬∞. 3x10-12 reps', tips: 'Bonne progression.' },
    { nom: 'Dips sol chevilles', pole: 'maison', muscle: 'bras', desc: 'Triceps sol variant', prep: 'Sol comme support, plier bras 90¬∞. 3x8-10 reps', tips: 'Attention aux articulations.' },
    { nom: 'Punch en l\'air', pole: 'maison', muscle: '√©paules', desc: 'Cardio poids corps', prep: 'Position boxer, punch rapide et puissant. 3x30sec', tips: 'Engager le core.' },
    { nom: 'Squat poids corps', pole: 'maison', muscle: 'jambes', desc: 'Fondamental cuisses', prep: 'Pieds largeur √©paules, descendre jusqu\'√† 90¬∞. 3x12-15 reps', tips: 'Genou ne d√©passe pas la pointe.' },
    { nom: 'Fentes avant', pole: 'maison', muscle: 'jambes', desc: 'Jambes altern√©es', prep: 'Pas devant, plier genou 90¬∞. 3x10-12 reps', tips: 'Progresser avec poids.' },
    { nom: 'Fentes arri√®re', pole: 'maison', muscle: 'jambes', desc: '√âquilibre & force', prep: 'Pas arri√®re, m√™me amplitude. 3x10 reps', tips: 'Id√©al pour ischio.' },
    { nom: 'Hip thrust canap√©', pole: 'maison', muscle: 'fessiers', desc: 'Fesses intensit√©', prep: 'Dos sur canap√©, pieds sol, pousser hanches. 3x12-15 reps', tips: 'Contraction max en haut.' },
    { nom: 'Squats pistol progression', pole: 'maison', muscle: 'jambes', desc: 'Squats 1 jambe progressif', prep: 'Assez facile quand progression bien faite. 3x5-8 reps', tips: 'Prendre une chaise pour √©quilibre.' },
    { nom: 'Sauts box poids corps', pole: 'maison', muscle: 'jambes', desc: 'Explosivit√© pliom√©trique', prep: 'Sauter sur chaise stable. 3x8-10 reps', tips: 'S√©curit√© d\'abord.' },
    { nom: 'Planche classique', pole: 'maison', muscle: 'abdos', desc: 'Core activation', prep: 'Position correcte, respirer. Tenir 30-60sec', tips: 'Dos droit, pas de creusement.' },
    { nom: 'Crunch au sol', pole: 'maison', muscle: 'abdos', desc: 'Abdos localis√©', prep: 'Genoux fl√©chis, relever t√™te l√©g√®rement. 3x15-20 reps', tips: 'Isolation abs, pas du cou.' },
    { nom: 'Planche lat√©rale', pole: 'maison', muscle: 'abdos', desc: 'Obliques & core lat√©ral', prep: 'Corps droit cot√©. Tenir 20-30sec chaque cot√©', tips: 'Core toujours contract√©.' },
    { nom: 'Relever jambes sol', pole: 'maison', muscle: 'abdos', desc: 'Abdos bas intensif', prep: 'Allong√© sol, jambes droites relever. 3x10-15 reps', tips: 'Contr√¥ler la descente.' },
    { nom: 'Bicycle crunch', pole: 'maison', muscle: 'abdos', desc: 'Abdos dynamique', prep: 'Genoux altern√©s coude oppos√©. 3x15-20 reps', tips: 'Mouvement contr√¥l√©.' },
    { nom: 'Superman au sol', pole: 'maison', muscle: 'dos', desc: 'Dos & extenseurs', prep: 'Allong√© ventre, relever bras & jambes. 3x12-15 reps', tips: 'Dos sain & puissant.' },
    { nom: 'Rowing √©lastique', pole: 'maison', muscle: 'dos', desc: 'Dos poids corps', prep: '√âlastique sur pieds, tirage horizontal. 3x12-15 reps', tips: 'Scapules en arri√®re.' },
    { nom: 'Bird dog', pole: 'maison', muscle: 'dos', desc: 'Stabilit√© spinale', prep: '√Ä quatre pattes, bras-jambe oppos√©e. 3x12 reps', tips: '√âquilibre & contr√¥le.' },
    { nom: 'Squat barre', pole: 'salle', muscle: 'jambes', desc: 'Force maximale jambes', prep: 'Barre sur √©paules, squat complet. 3x5-8 reps', tips: 'Progression progressive.' },
    { nom: 'Presse cuisses', pole: 'salle', muscle: 'jambes', desc: 'Machine salle', prep: 'Appui complet pied large. 3x10-12 reps', tips: 'Genou ne d√©passe pas.' },
    { nom: 'Leg curl allong√©', pole: 'salle', muscle: 'jambes', desc: 'Ischio machines', prep: 'Allong√©, fl√©chir jambes. 3x10-12 reps', tips: 'Contr√¥le plein.' },
    { nom: 'Leg extension', pole: 'salle', muscle: 'jambes', desc: 'Quadriceps isolation', prep: 'Assis, √©tendre jambes. 3x12-15 reps', tips: 'Pas √† abuser.' },
    { nom: 'Fente barre salle', pole: 'salle', muscle: 'jambes', desc: 'Jambes avec charge', prep: 'Barre √©paules, fente devant. 3x8-10 reps', tips: 'Stabilit√© importante.' },
    { nom: 'Hack squat machine', pole: 'salle', muscle: 'jambes', desc: 'Machine hack squat', prep: 'Dos contre machine, squat. 3x8-12 reps', tips: 'Profondeur contr√¥l√©e.' },
    { nom: 'D√©velopp√© couch√© barre', pole: 'salle', muscle: 'poitrine', desc: 'Force poitrine', prep: 'Barre niveau poitrine, pousser. 3x5-8 reps', tips: 'Spotters conseill√©.' },
    { nom: 'D√©velopp√© inclin√© barre', pole: 'salle', muscle: 'poitrine', desc: 'Haut poitrine force', prep: 'Banc inclin√© 45¬∞, m√™me technique. 3x6-8 reps', tips: 'Plus difficile.' },
    { nom: 'D√©velopp√© couch√© halt√®res', pole: 'salle', muscle: 'poitrine', desc: 'Amplitude plus grande', prep: 'Halt√®res amplitude compl√®te. 3x8-10 reps', tips: 'ROM plus important.' },
    { nom: '√âcart√©s machine pec deck', pole: 'salle', muscle: 'poitrine', desc: 'Pec isolation machine', prep: 'Assis, rapprocher bras. 3x10-12 reps', tips: 'Contraction compl√®te.' },
    { nom: '√âcart√©s inclin√©s halt√®res', pole: 'salle', muscle: 'poitrine', desc: 'Haut pec √©cart√©s', prep: 'Banc inclin√©, halt√®res √©cart√©s. 3x10-12 reps', tips: 'Amplitude max.' },
    { nom: 'Push up d√©clin√© barre', pole: 'salle', muscle: 'poitrine', desc: 'Poids du corps avanc√©', prep: 'Pieds sur barre, pompes. 3x8-12 reps', tips: 'Progressif.' },
    { nom: 'Tractions large', pole: 'salle', muscle: 'dos', desc: 'Dos largeur', prep: 'Grip large, tirer vers poitrine. 3x5-8 reps', tips: 'Positionnement mains.' },
    { nom: 'Rowing barre', pole: 'salle', muscle: 'dos', desc: 'Dos masse', prep: 'Barre au sol, pencher tirer. 3x6-8 reps', tips: 'Dos droit, pas de ronde.' },
    { nom: 'Rowing halt√®res unilat√©ral', pole: 'salle', muscle: 'dos', desc: 'Dos unilat√©ral', prep: 'Une main, une halt√®re tirage. 3x8-10 reps', tips: '√âquilibre core.' },
    { nom: 'Tirage vertical', pole: 'salle', muscle: 'dos', desc: 'Lat pulldown machine', prep: 'Tirage vertical vers poitrine. 3x10-12 reps', tips: 'Coudes angles.' },
    { nom: 'Pull-over poulie', pole: 'salle', muscle: 'dos', desc: 'Pec & lat √©tirement', prep: 'Poulie haute, pull-over horizontal. 3x10-12 reps', tips: 'ROM full.' },
    { nom: 'Rowing machine', pole: 'salle', muscle: 'dos', desc: 'Machine rowing cardio', prep: 'Rowing complet. 3x10-15 reps', tips: 'Cardio + force.' },
    { nom: 'D√©velopp√© √©paules halt√®res', pole: 'salle', muscle: '√©paules', desc: 'Force √©paules', prep: 'Assis/debout halt√®res √©paules. 3x6-8 reps', tips: 'Contr√¥le descente.' },
    { nom: '√âl√©vations lat√©rales halt√®res', pole: 'salle', muscle: '√©paules', desc: 'Delto√Øde lat√©ral', prep: 'Halt√®res lev√©es lat√©ralement. 3x12-15 reps', tips: 'Poids mod√©r√©.' },
    { nom: 'Oiseau halt√®res inclin√©', pole: 'salle', muscle: '√©paules', desc: 'Delto√Øde post√©rieur', prep: 'Banc inclin√© pench√©, pec fly reverse. 3x12-15 reps', tips: 'Muscles arri√®re.' },
    { nom: '√âl√©vations frontales halt√®res', pole: 'salle', muscle: '√©paules', desc: 'Delto√Øde ant√©rieur', prep: 'Halt√®res lev√©es frontales. 3x12-15 reps', tips: 'Alternance.' },
    { nom: 'Crunch poulie', pole: 'salle', muscle: 'abdos', desc: 'Abdos machine poulie', prep: 'Cable crunch assis vers bas. 3x12-15 reps', tips: 'Contraction abdos.' },
    { nom: 'Ab wheel rollout', pole: 'salle', muscle: 'abdos', desc: 'Ab wheel roulette', prep: '√Ä genoux, rouler avant puis arri√®re. 3x8-12 reps', tips: 'Progressif, tr√®s intense.' },
    { nom: 'Relev√©s jambes barre', pole: 'salle', muscle: 'abdos', desc: 'Abdos suspendu', prep: 'Pendu barre, relever jambes. 3x8-12 reps', tips: 'Contr√¥le important.' },
];

const RECIPES = [
    { nom: 'Poulet Grill√© Riz Complet', type: 'Prot√©ine', desc: 'Poitrine poulet + riz complet + l√©gumes', image: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=300&h=200&fit=crop', nutrition: { 'Prot√©ines': '35g', 'Glucides': '45g', 'Lipides': '8g' }, ingredients: ['Poulet 200g', 'Riz complet 150g', 'Brocoli 100g', 'Sel & poivre'], etapes: ['Cuire poulet √† 180¬∞C 25min', 'Riz complet 45min eau bouillante', 'Cuire brocoli vapeur 10min', 'Assembler et servir'] },
    { nom: '≈íufs Brouill√©s Complets', type: 'Petit-d√©j', desc: '≈íufs + pain complet + fruits', image: 'https://images.unsplash.com/photo-1525351484163-7529414344d7?w=300&h=200&fit=crop', nutrition: { 'Prot√©ines': '18g', 'Glucides': '35g', 'Lipides': '15g' }, ingredients: ['3 ≈ìufs', 'Pain complet 2 tranches', 'Beurre 1c.√†.c.', 'Banane 1'], etapes: ['Battre ≈ìufs', 'Faire cuire √† feu moyen 3-4min', 'Toaster pain', 'Ajouter fruits frais'] },
    { nom: 'Saumon Patates Douces', type: 'Prot√©ine', desc: 'Saumon + patates douces + laitue', image: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=300&h=200&fit=crop', nutrition: { 'Prot√©ines': '32g', 'Glucides': '40g', 'Lipides': '18g' }, ingredients: ['Saumon 150g', 'Patate douce 200g', 'Laitue 50g', 'Citron'], etapes: ['Cuire saumon au four 15min', 'Cuire patate douce 25min', 'Pr√©parer salade', 'Servir avec citron'] },
    { nom: 'Smoothie Prot√©in√©', type: 'Petit-d√©j', desc: 'Yaourt + fruits + miel + granola', image: 'https://images.unsplash.com/photo-1584417694712-0a8fcb1ae4f6?w=300&h=200&fit=crop', nutrition: { 'Prot√©ines': '20g', 'Glucides': '45g', 'Lipides': '5g' }, ingredients: ['Yaourt 200g', 'Banane 1', 'Baies 100g', 'Miel 1c.√†.s.', 'Granola 30g'], etapes: ['Verser yaourt blender', 'Ajouter banane baies', 'Mixer 30sec', 'Servir avec granola'] },
    { nom: 'Salade Thon Tomates', type: 'Prot√©ine', desc: 'Thon conserve + l√©gumes frais + olive', image: 'https://images.unsplash.com/photo-1540189549336-e6e99c3679fe?w=300&h=200&fit=crop', nutrition: { 'Prot√©ines': '28g', 'Glucides': '15g', 'Lipides': '12g' }, ingredients: ['Thon 150g', 'Tomates 2', 'Concombre 100g', 'Olives 50g', 'Huile olive'], etapes: ['√âgoutter thon', 'D√©couper tomates & concombre', 'M√©langer tous ingr√©dients', 'Ajouter huile olive'] },
    { nom: 'P√¢tes Bolognaise', type: 'Carbs', desc: 'P√¢tes compl√®tes + sauce viande', image: 'https://images.unsplash.com/photo-1621996346565-e3dbc646d9a9?w=300&h=200&fit=crop', nutrition: { 'Prot√©ines': '25g', 'Glucides': '60g', 'Lipides': '10g' }, ingredients: ['P√¢tes compl√®tes 150g', 'Viande hach√©e 150g', 'Tomates 200g', 'Oignon 1'], etapes: ['Cuire p√¢tes 12min', 'Faire revenir viande', 'Ajouter tomates sauce', 'M√©langer p√¢tes & sauce'] },
    { nom: 'Poulet Curry Riz', type: 'Prot√©ine', desc: 'Curry l√©ger + riz basmati', image: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=300&h=200&fit=crop', nutrition: { 'Prot√©ines': '33g', 'Glucides': '50g', 'Lipides': '8g' }, ingredients: ['Poulet 200g', 'Riz basmati 150g', 'Curry poudre 1c.√†.c.', 'Lait coco 100ml'], etapes: ['Cuire riz basmati', 'Faire revenir poulet', 'Ajouter curry & lait coco', 'Mijoter 15min'] },
    { nom: 'Pancakes Prot√©in√©s', type: 'Petit-d√©j', desc: '≈íufs + flocons avoine + miel', image: 'https://images.unsplash.com/photo-1541519227354-08fa5d50c44d?w=300&h=200&fit=crop', nutrition: { 'Prot√©ines': '22g', 'Glucides': '40g', 'Lipides': '8g' }, ingredients: ['2 ≈ìufs', 'Flocons avoine 50g', 'Miel 1c.√†.s.', 'Cannelle'], etapes: ['Mixer ≈ìufs & avoine', 'Cuire po√™le 3-4min par face', 'Servir avec miel', 'Ajouter cannelle'] },
    { nom: 'Tuna Sushi Rice Bowl', type: 'Prot√©ine', desc: 'Riz sushi + thon + l√©gumes', image: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=300&h=200&fit=crop', nutrition: { 'Prot√©ines': '30g', 'Glucides': '55g', 'Lipides': '6g' }, ingredients: ['Riz sushi 150g', 'Thon 150g', 'Avocat 100g', 'Cucumber 50g'], etapes: ['Cuire riz sushi', 'Ajouter vinaigre riz', 'Assembler bowl', 'Ajouter prot√©ines & l√©gumes'] },
    { nom: 'Chicken Steak L√©gumes', type: 'Prot√©ine', desc: 'Filet poulet + brocoli carottes', image: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=300&h=200&fit=crop', nutrition: { 'Prot√©ines': '36g', 'Glucides': '25g', 'Lipides': '7g' }, ingredients: ['Poulet filet 200g', 'Brocoli 150g', 'Carottes 100g', 'Ail 2 gousses'], etapes: ['Cuire poulet 20min 180¬∞C', 'Vapeur l√©gumes 12min', 'Faire revenir ail', 'M√©langer tous'] },
    { nom: 'Yaourt Muesli Miel', type: 'Petit-d√©j', desc: 'Yaourt grec + muesli + fruits secs', image: 'https://images.unsplash.com/photo-1488477181946-6428a0291840?w=300&h=200&fit=crop', nutrition: { 'Prot√©ines': '15g', 'Glucides': '48g', 'Lipides': '8g' }, ingredients: ['Yaourt grec 200g', 'Muesli 50g', 'Miel 2c.√†.s.', 'Amandes 20g'], etapes: ['Verser yaourt bol', 'Ajouter muesli', 'Arroser miel', 'Ajouter amandes'] },
    { nom: 'Riz Beans Tomate', type: 'Carbs', desc: 'Riz complet + haricots + sauce', image: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=300&h=200&fit=crop', nutrition: { 'Prot√©ines': '14g', 'Glucides': '68g', 'Lipides': '5g' }, ingredients: ['Riz complet 150g', 'Haricots 150g', 'Tomates sauce 200g', 'Oignon 1'], etapes: ['Cuire riz 45min', 'Faire revenir oignon', 'Ajouter haricots & tomates', 'Mijoter 10min'] },
    { nom: 'Omelette Fromage', type: 'Prot√©ine', desc: '≈íufs + fromage + champignons', image: 'https://images.unsplash.com/photo-1548103521-24b73f26f82f?w=300&h=200&fit=crop', nutrition: { 'Prot√©ines': '20g', 'Glucides': '8g', 'Lipides': '14g' }, ingredients: ['3 ≈ìufs', 'Fromage 50g', 'Champignons 100g', 'Beurre 1c.√†.c.'], etapes: ['Faire revenir champignons', 'Battre ≈ìufs', 'Cuire omelette 3-4min', 'Ajouter fromage'] },
    { nom: 'Burger Healthy', type: 'Prot√©ine', desc: 'Steak prot√©ine + pain complet', image: 'https://images.unsplash.com/photo-1585238341710-4913dfb3d21c?w=300&h=200&fit=crop', nutrition: { 'Prot√©ines': '32g', 'Glucides': '38g', 'Lipides': '8g' }, ingredients: ['Steak 180g', 'Pain complet 50g', 'Laitue 20g', 'Tomate 1'], etapes: ['Cuire steak 12min', 'Toaster pain', 'Assembler burger', 'Ajouter l√©gumes'] },
];

const NOUSHI_EXOS = [
    { nom: 'One Arm Pull-up', niveau: 'Elite', desc: 'Tractions 1 bras', prep: 'Progression 6-12 mois minimum', tips: 'Travail unilat√©ral essentiel' },
    { nom: 'Muscle Up', niveau: 'Elite', desc: 'Transition pull-up push-up', prep: 'Dips & pull-ups solides requis', tips: 'Technique de transition crucial' },
    { nom: 'Front Lever Hold', niveau: 'Elite', desc: 'Levier avant suspendu', prep: 'Core explosif requis', tips: 'Progressions palier par palier' },
    { nom: 'Pistol Squat (1 jambe)', niveau: 'Elite', desc: 'Squat complet 1 jambe', prep: '200 squats 2 jambes avant', tips: 'Mobilit√© & force extr√™me' },
    { nom: 'Handstand Push-up', niveau: 'Elite', desc: 'Pompes en √©quilibre mains', prep: '√âquilibre + force √©paules', tips: 'Mur recommand√© d√©buts' },
    { nom: 'Planche √Ä Bras Tendu', niveau: 'Avanc√©', desc: 'Planche avant bras droit', prep: '3 mois core progression', tips: 'ISO extr√™me, respiration cl√©' },
    { nom: 'Bridge Hold Intense', niveau: 'Avanc√©', desc: 'Bridge 1 jambe allong√©e', prep: 'Bridge classique ma√Ætris√©', tips: 'Glutes & ischio intensit√© max' },
    { nom: 'Archer Pull-ups', niveau: 'Avanc√©', desc: 'Traction type arch√©e', prep: 'Pull-ups 15+ reps d\'abord', tips: 'Asym√©trie volontaire' },
    { nom: 'Decline Push-up Explosif', niveau: 'Avanc√©', desc: 'Pompes d√©clin√©es explosives', prep: 'Pompes explosives ma√Ætris√©es', tips: 'Applaudi = succ√®s' },
    { nom: 'Planche Lat√©rale Jambes Lev√©es', niveau: 'Avanc√©', desc: 'Planche lat√©rale jambe lev√©e', prep: 'Planche lat√©rale 60sec+', tips: 'Obliques & stabilit√© core' },
    { nom: 'Suspension Trainer L-sit', niveau: 'Avanc√©', desc: 'L-sit avec suspensions', prep: 'L-sit sol ma√Ætris√©', tips: 'Flexibilit√© & force' },
    { nom: 'Pseudo Planche Push-up', niveau: 'Avanc√©', desc: 'Pompes pseudo planche', prep: 'Pompes explosives solides', tips: 'Progression 4-6 mois' },
    { nom: 'Dips Weighted', niveau: 'Avanc√©', desc: 'Dips avec charge 20kg+', prep: 'Dips 20 reps poids corps', tips: 'Cha√Æne & assiette + poids' },
    { nom: 'Squat Assisted 1 jambe', niveau: 'Avanc√©', desc: 'Pistol squat avec support', prep: 'Progressions multiples', tips: 'Progression vers pistol' },
    { nom: 'V-up Explosive', niveau: 'Avanc√©', desc: 'Abdos explosive lev√©e jambes', prep: '20 v-ups contr√¥l√©s d\'abord', tips: 'Dynamique extr√™me' },
];

const RELAX_SESSIONS = [
    { nom: 'Yoga Matin √ânergie', type: 'Yoga', desc: 'R√©veille le corps en douceur', steps: ['Salutation soleil x5', 'Posture cobra 30sec', '√âtirement jambes avant', 'Respiration profonde 5min'] },
    { nom: 'M√©ditation Pleine Conscience', type: 'M√©ditation', desc: 'Calmer l\'esprit 15min', steps: ['Position assis confortable', 'Respiration abdominale', 'Observation pens√©es sans juger', 'Retour √† respiration 5min'] },
    { nom: '√âtirement Complet Soir', type: '√âtirement', desc: 'R√©cup√©ration musculaire', steps: ['Hamstring √©tirement 30sec', 'Hip flexor 30sec', '√âpaules rotation 30sec', 'Dos rotation 30sec'] },
    { nom: 'Yoga Yin Profond', type: 'Yoga', desc: 'Tenues longues passives', steps: ['Dragon pose 3min', 'Caterpillar 3min', 'Supine twist 2min par cot√©', 'Savasana finale 10min'] },
    { nom: 'Respiration Coh√©rente', type: 'Respiration', desc: 'R√©duire stress & cortisol', steps: ['Inspiration 5 sec', 'Expiration 5 sec', '5min total minimum', 'Garder fluidit√©'] },
    { nom: 'Tai Chi Lent', type: 'Mouvement', desc: 'Mouvement lent m√©ditative', steps: ['Posture initiale', 'Lever bras lentement', 'Rotation hanches', 'Jambes pas glissant'] },
    { nom: 'Massage Pieds Auto', type: 'Massage', desc: 'Relaxation pieds reflexologie', steps: ['Pression points talons', 'Massage arches', 'Articulations orteils', 'D√©tente jambes'] },
    { nom: 'Yoga Couch√© Relaxe', type: 'Yoga', desc: 'Poses couch√© r√©cup√©ration', steps: ['Happy baby 2min', 'Knees to chest 2min', 'Supine twist 3min', 'Savasana 10min'] },
    { nom: 'M√©ditation Vipassana', type: 'M√©ditation', desc: 'Observation sensation corps', steps: ['Scan corporel 20min', 'Observation sensations', 'Absence attachement', 'Transition lente'] },
    { nom: '√âtirement √âpaules Cou', type: '√âtirement', desc: 'Rel√¢cher tensions haute corps', steps: ['Shoulder rolls 20x', 'Neck stretch 4 directions', 'Trap√®ze √©tirement 30sec', 'Posture correction'] },
    { nom: 'Danse Libre Lente', type: 'Mouvement', desc: 'Expression corporelle douce', steps: ['√âchauffement doux 2min', 'Mouvements intuitivement', 'Suivre musique relaxante', 'Fermeture 5min statique'] },
    { nom: 'Gratitude & Journal', type: 'Mental', desc: 'R√©flexion positive 10min', steps: ['√âcrire 3 gratitudes', 'R√©flexion jour', 'Intention demain', 'Respiration finale'] },
];

let currentPage = 'home';
let currentMode = 'maison';
let currentMuscleFilter = 'tous';
let favoris = { exos: [], recipes: [], noushi: [], relax: [] };

function saveFavoris() {
    try {
        localStorage.setItem('bouahchi_favoris', JSON.stringify(favoris));
    } catch (e) {
        console.warn('Impossible de sauvegarder les favoris', e);
    }
    updateStats();
}

function loadFavoris() {
    try {
        const raw = localStorage.getItem('bouahchi_favoris');
        if (raw) favoris = JSON.parse(raw);
    } catch (e) {
        console.warn('Impossible de charger les favoris', e);
    }
}

function isFavori(type, key) {
    if (!favoris[type]) return false;
    return favoris[type].includes(key);
}

function toggleFavori(type, key) {
    if (!favoris[type]) favoris[type] = [];
    const idx = favoris[type].indexOf(key);
    if (idx === -1) {
        favoris[type].push(key);
    } else {
        favoris[type].splice(idx, 1);
    }
    saveFavoris();
    renderAllPages();
}

function updateStats() {
    const streakEl = document.getElementById('statStreak');
    const mealsEl = document.getElementById('statMeals');
    const sessionsEl = document.getElementById('statSessions');

    const todayKey = new Date().toISOString().slice(0, 10);
    let history;
    try {
        history = JSON.parse(localStorage.getItem('bouahchi_history') || '{}');
    } catch {
        history = {};
    }

    history[todayKey] = history[todayKey] || { exos: 0, meals: 0 };

    let streak = 0;
    let d = new Date();
    while (true) {
        const key = d.toISOString().slice(0, 10);
        const day = history[key];
        if (!day || day.exos === 0) break;
        streak++;
        d.setDate(d.getDate() - 1);
    }

    const totalMeals = Object.values(history).reduce((sum, h) => sum + (h.meals || 0), 0);
    const totalSessions = Object.values(history).reduce((sum, h) => sum + (h.exos || 0), 0);

    streakEl.textContent = streak;
    mealsEl.textContent = totalMeals;
    sessionsEl.textContent = totalSessions;
}

function logSession(type) {
    const todayKey = new Date().toISOString().slice(0, 10);
    let history;
    try {
        history = JSON.parse(localStorage.getItem('bouahchi_history') || '{}');
    } catch {
        history = {};
    }
    history[todayKey] = history[todayKey] || { exos: 0, meals: 0 };
    if (type === 'exo') {
        history[todayKey].exos += 1;
    } else if (type === 'meal') {
        history[todayKey].meals += 1;
    }
    localStorage.setItem('bouahchi_history', JSON.stringify(history));
    updateStats();
}

function goToPage(pageId) {
    currentPage = pageId;

    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    const page = document.getElementById(pageId);
    if (page) page.classList.add('active');

    document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
    const navBtn = { 'home': 'navHome', 'exos': 'navExos', 'nutrition': 'navFood', 'noushi': 'navNoushi', 'relax': 'navRelax', 'favoris': 'navFavoris' }[pageId];
    if (navBtn) {
        const el = document.getElementById(navBtn);
        if (el) el.classList.add('active');
    }

    const container = document.querySelector('.container');
    if (container) container.scrollTop = 0;

    if (pageId === 'exos') renderExosPage();
    if (pageId === 'nutrition') renderRecipesPage();
    if (pageId === 'noushi') renderNoushiPage();
    if (pageId === 'relax') renderRelaxPage();
    if (pageId === 'favoris') renderFavorisPage();
}

function chooseMode(mode) {
    currentMode = mode;
    const sub = document.getElementById('exos-sub');
    if (sub) {
        sub.textContent = mode === 'maison'
            ? 'Exercices au poids du corps (0 mat√©riel)'
            : 'Exercices complets pour la salle';
    }
    goToPage('exos');
}

function getUniqueMusclesForMode(mode) {
    const muscles = new Set();
    EXOS.filter(e => e.pole === mode).forEach(e => muscles.add(e.muscle));
    return ['tous', ...Array.from(muscles)];
}

function renderModeNav() {
    const modeNav = document.getElementById('mode-nav');
    if (!modeNav) return;
    modeNav.innerHTML = '';

    ['maison', 'salle'].forEach(mode => {
        const btn = document.createElement('button');
        btn.className = 'top-nav-btn' + (mode === currentMode ? ' active' : '');
        btn.textContent = mode === 'maison' ? 'MAISON' : 'SALLE';
        btn.onclick = () => {
            currentMode = mode;
            currentMuscleFilter = 'tous';
            renderExosPage();
        };
        modeNav.appendChild(btn);
    });
}

function renderMuscleTabs() {
    const tabs = document.getElementById('muscle-tabs');
    if (!tabs) return;
    tabs.innerHTML = '';

    const muscles = getUniqueMusclesForMode(currentMode);
    muscles.forEach(muscle => {
        const btn = document.createElement('button');
        btn.className = 'tab-btn' + (muscle === currentMuscleFilter ? ' active' : '');
        btn.textContent = muscle === 'tous' ? 'Tous' : muscle.toUpperCase();
        btn.onclick = () => {
            currentMuscleFilter = muscle;
            renderExosGrid();
        };
        tabs.appendChild(btn);
    });
}

function renderExosGrid() {
    const grid = document.getElementById('exos-grid');
    if (!grid) return;
    const search = document.getElementById('exos-search');
    const query = (search?.value || '').toLowerCase();

    let list = EXOS.filter(e => e.pole === currentMode);
    if (currentMuscleFilter !== 'tous') {
        list = list.filter(e => e.muscle === currentMuscleFilter);
    }
    if (query) {
        list = list.filter(e =>
            e.nom.toLowerCase().includes(query) ||
            (e.desc && e.desc.toLowerCase().includes(query))
        );
    }

    grid.innerHTML = '';

    if (list.length === 0) {
        const div = document.createElement('div');
        div.className = 'empty-state';
        div.innerHTML = '<div class="empty-state-icon">üòï</div><div class="empty-state-text">Aucun exercice trouv√©</div>';
        grid.appendChild(div);
        return;
    }

    list.forEach((exo, index) => {
        const card = document.createElement('div');
        card.className = 'card';

        const header = document.createElement('div');
        header.className = 'card-header';

        const title = document.createElement('div');
        title.className = 'card-title';
        title.textContent = exo.nom;

        const favBtn = document.createElement('button');
        favBtn.className = 'card-fav-btn';
        favBtn.innerHTML = isFavori('exos', exo.nom) ? '‚≠ê' : '‚òÜ';
        if (isFavori('exos', exo.nom)) {
            card.classList.add('favorited');
            favBtn.classList.add('active');
        }
        favBtn.onclick = (evt) => {
            evt.stopPropagation();
            toggleFavori('exos', exo.nom);
        };

        header.appendChild(title);
        header.appendChild(favBtn);

        const meta = document.createElement('div');
        meta.className = 'card-meta';
        meta.textContent = exo.muscle.toUpperCase() + ' ‚Ä¢ ' + (exo.pole === 'maison' ? 'Maison' : 'Salle');

        const desc = document.createElement('div');
        desc.className = 'card-text';
        desc.textContent = exo.desc || '';

        const prepSection = document.createElement('div');
        prepSection.className = 'card-section';
        const prepTitle = document.createElement('div');
        prepTitle.className = 'card-section-title';
        prepTitle.textContent = 'Mise en place';
        const prepContent = document.createElement('div');
        prepContent.className = 'card-section-content';
        prepContent.textContent = exo.prep || '';
        prepSection.appendChild(prepTitle);
        prepSection.appendChild(prepContent);

        const tipsSection = document.createElement('div');
        tipsSection.className = 'card-section';
        const tipsTitle = document.createElement('div');
        tipsTitle.className = 'card-section-title';
        tipsTitle.textContent = 'Conseils';
        const tipsContent = document.createElement('div');
        tipsContent.className = 'card-section-content';
        tipsContent.textContent = exo.tips || '';
        tipsSection.appendChild(tipsTitle);
        tipsSection.appendChild(tipsContent);

        card.appendChild(header);
        card.appendChild(meta);
        card.appendChild(desc);
        card.appendChild(prepSection);
        card.appendChild(tipsSection);

        const videoUrl = YOUTUBE_VIDEOS[exo.nom];
        if (videoUrl) {
            const video = document.createElement('div');
            video.className = 'video-container';
            video.innerHTML = `<iframe src="${videoUrl}" allowfullscreen loading="lazy"></iframe>`;
            card.appendChild(video);
        }

        const nav = document.createElement('div');
        nav.className = 'card-nav';
        const prevBtn = document.createElement('button');
        prevBtn.className = 'nav-btn-prev';
        prevBtn.textContent = '‚óÄ Pr√©c√©dent';
        prevBtn.disabled = index === 0;
        prevBtn.onclick = (e) => {
            e.stopPropagation();
            if (index > 0) {
                const nextCard = grid.children[index - 1];
                nextCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        };

        const nextBtn = document.createElement('button');
        nextBtn.className = 'nav-btn-next';
        nextBtn.textContent = 'Suivant ‚ñ∂';
        nextBtn.disabled = index === list.length - 1;
        nextBtn.onclick = (e) => {
            e.stopPropagation();
            if (index < list.length - 1) {
                const nextCard = grid.children[index + 1];
                nextCard.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        };

        nav.appendChild(prevBtn);
        nav.appendChild(nextBtn);
        card.appendChild(nav);

        card.onclick = () => {
            logSession('exo');
        };

        grid.appendChild(card);
    });
}

function renderExosPage() {
    renderModeNav();
    renderMuscleTabs();
    renderExosGrid();
}

function renderRecipesTabs() {
    const tabs = document.getElementById('meal-tabs');
    if (!tabs) return;
    tabs.innerHTML = '';

    const types = Array.from(new Set(RECIPES.map(r => r.type || 'autre')));
    ['tous', ...types].forEach(type => {
        const btn = document.createElement('button');
        btn.className = 'tab-btn';
        btn.textContent = type === 'tous' ? 'Tous' : type.toUpperCase();
        btn.onclick = () => {
            renderRecipesGrid(type);
        };
        if (type === 'tous') btn.classList.add('active');
        tabs.appendChild(btn);
    });
}

function renderRecipesGrid(filterType = 'tous') {
    const grid = document.getElementById('recipes-grid');
    if (!grid) return;

    const search = document.getElementById('recipes-search');
    const query = (search?.value || '').toLowerCase();

    let list = RECIPES.slice();
    if (filterType !== 'tous') {
        list = list.filter(r => (r.type || 'autre') === filterType);
    }
    if (query) {
        list = list.filter(r =>
            r.nom.toLowerCase().includes(query) ||
            (r.desc && r.desc.toLowerCase().includes(query))
        );
    }

    grid.innerHTML = '';

    if (list.length === 0) {
        grid.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üçΩ</div><div class="empty-state-text">Aucune recette trouv√©e</div></div>';
        return;
    }

    list.forEach((recette, index) => {
        const card = document.createElement('div');
        card.className = 'card';

        const header = document.createElement('div');
        header.className = 'card-header';

        const title = document.createElement('div');
        title.className = 'card-title';
        title.textContent = recette.nom;

        const favBtn = document.createElement('button');
        favBtn.className = 'card-fav-btn';
        favBtn.innerHTML = isFavori('recipes', recette.nom) ? '‚≠ê' : '‚òÜ';
        if (isFavori('recipes', recette.nom)) {
            card.classList.add('favorited');
            favBtn.classList.add('active');
        }
        favBtn.onclick = (e) => {
            e.stopPropagation();
            toggleFavori('recipes', recette.nom);
        };

        header.appendChild(title);
        header.appendChild(favBtn);

        const meta = document.createElement('div');
        meta.className = 'card-meta';
        meta.textContent = (recette.type || 'Autre').toUpperCase();

        const desc = document.createElement('div');
        desc.className = 'card-text';
        desc.textContent = recette.desc || '';

        card.appendChild(header);
        card.appendChild(meta);
        card.appendChild(desc);

        if (recette.image) {
            const img = document.createElement('div');
            img.className = 'recipe-image';
            img.innerHTML = `<img src="${recette.image}" alt="${recette.nom}" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=300&h=200&fit=crop'">`;
            card.appendChild(img);
        }

        if (recette.nutrition) {
            const nutri = document.createElement('div');
            nutri.className = 'recipe-nutrition';
            Object.entries(recette.nutrition).forEach(([label, val]) => {
                const item = document.createElement('div');
                item.className = 'nutrition-item';
                item.innerHTML = `<span class="nutrition-label">${label}</span><span class="nutrition-value">${val}</span>`;
                nutri.appendChild(item);
            });
            card.appendChild(nutri);
        }

        if (recette.ingredients && recette.ingredients.length) {
            const listDiv = document.createElement('div');
            listDiv.className = 'ingredient-list';
            recette.ingredients.forEach(ing => {
                const li = document.createElement('div');
                li.className = 'ingredient-item';
                li.textContent = ing;
                listDiv.appendChild(li);
            });
            card.appendChild(listDiv);
        }

        if (recette.etapes && recette.etapes.length) {
            const stepsDiv = document.createElement('div');
            stepsDiv.className = 'step-list';
            recette.etapes.forEach((step, idx) => {
                const s = document.createElement('div');
                s.className = 'step-item';
                s.innerHTML = `<div class="step-number">${idx + 1}</div><div class="step-content">${step}</div>`;
                stepsDiv.appendChild(s);
            });
            card.appendChild(stepsDiv);
        }

        const nav = document.createElement('div');
        nav.className = 'card-nav';
        const prevBtn = document.createElement('button');
        prevBtn.className = 'nav-btn-prev';
        prevBtn.textContent = '‚óÄ Pr√©c√©dent';
        prevBtn.disabled = index === 0;
        prevBtn.onclick = (e) => {
            e.stopPropagation();
            if (index > 0) {
                grid.children[index - 1].scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        };
        const nextBtn = document.createElement('button');
        nextBtn.className = 'nav-btn-next';
        nextBtn.textContent = 'Suivant ‚ñ∂';
        nextBtn.disabled = index === list.length - 1;
        nextBtn.onclick = (e) => {
            e.stopPropagation();
            if (index < list.length - 1) {
                grid.children[index + 1].scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        };
        nav.appendChild(prevBtn);
        nav.appendChild(nextBtn);
        card.appendChild(nav);

        card.onclick = () => logSession('meal');

        grid.appendChild(card);
    });
}

function renderRecipesPage() {
    renderRecipesTabs();
    renderRecipesGrid('tous');
}

function renderNoushiTabs() {
    const tabs = document.getElementById('noushi-tabs');
    if (!tabs) return;
    tabs.innerHTML = '';

    const niveaux = Array.from(new Set(NOUSHI_EXOS.map(n => n.niveau || 'standard')));
    ['tous', ...niveaux].forEach(level => {
        const btn = document.createElement('button');
        btn.className = 'tab-btn';
        btn.textContent = level === 'tous' ? 'Tous' : level.toUpperCase();
        btn.onclick = () => {
            renderNoushiGrid(level);
        };
        if (level === 'tous') btn.classList.add('active');
        tabs.appendChild(btn);
    });
}

function renderNoushiGrid(filterLevel = 'tous') {
    const grid = document.getElementById('noushi-grid');
    if (!grid) return;

    const search = document.getElementById('noushi-search');
    const query = (search?.value || '').toLowerCase();

    let list = NOUSHI_EXOS.slice();
    if (filterLevel !== 'tous') {
        list = list.filter(e => (e.niveau || 'standard') === filterLevel);
    }
    if (query) {
        list = list.filter(e =>
            e.nom.toLowerCase().includes(query) ||
            (e.desc && e.desc.toLowerCase().includes(query))
        );
    }

    grid.innerHTML = '';

    if (list.length === 0) {
        grid.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üî•</div><div class="empty-state-text">Aucun exo noushi trouv√©</div></div>';
        return;
    }

    list.forEach((exo, index) => {
        const card = document.createElement('div');
        card.className = 'card noushi-card';

        const header = document.createElement('div');
        header.className = 'card-header';

        const title = document.createElement('div');
        title.className = 'card-title';
        title.textContent = exo.nom;

        const favBtn = document.createElement('button');
        favBtn.className = 'card-fav-btn';
        favBtn.innerHTML = isFavori('noushi', exo.nom) ? '‚≠ê' : '‚òÜ';
        if (isFavori('noushi', exo.nom)) {
            card.classList.add('favorited');
            favBtn.classList.add('active');
        }
        favBtn.onclick = (e) => {
            e.stopPropagation();
            toggleFavori('noushi', exo.nom);
        };

        header.appendChild(title);
        header.appendChild(favBtn);

        const meta = document.createElement('div');
        meta.className = 'card-meta';
        meta.textContent = (exo.niveau || 'Standard').toUpperCase();

        const desc = document.createElement('div');
        desc.className = 'card-text';
        desc.textContent = exo.desc || '';

        card.appendChild(header);
        card.appendChild(meta);
        card.appendChild(desc);

        if (exo.prep) {
            const pSection = document.createElement('div');
            pSection.className = 'card-section';
            pSection.innerHTML = '<div class="card-section-title">Pr√©paration</div><div class="card-section-content">' + exo.prep + '</div>';
            card.appendChild(pSection);
        }

        if (exo.tips) {
            const tSection = document.createElement('div');
            tSection.className = 'card-section';
            tSection.innerHTML = '<div class="card-section-title">Conseils</div><div class="card-section-content">' + exo.tips + '</div>';
            card.appendChild(tSection);
        }

        const videoUrl = YOUTUBE_VIDEOS[exo.nom];
        if (videoUrl) {
            const video = document.createElement('div');
            video.className = 'video-container';
            video.innerHTML = `<iframe src="${videoUrl}" allowfullscreen loading="lazy"></iframe>`;
            card.appendChild(video);
        }

        const nav = document.createElement('div');
        nav.className = 'card-nav';
        const prevBtn = document.createElement('button');
        prevBtn.className = 'nav-btn-prev';
        prevBtn.textContent = '‚óÄ Pr√©c√©dent';
        prevBtn.disabled = index === 0;
        prevBtn.onclick = (e) => {
            e.stopPropagation();
            if (index > 0) grid.children[index - 1].scrollIntoView({ behavior: 'smooth', block: 'start' });
        };
        const nextBtn = document.createElement('button');
        nextBtn.className = 'nav-btn-next';
        nextBtn.textContent = 'Suivant ‚ñ∂';
        nextBtn.disabled = index === list.length - 1;
        nextBtn.onclick = (e) => {
            e.stopPropagation();
            if (index < list.length - 1) grid.children[index + 1].scrollIntoView({ behavior: 'smooth', block: 'start' });
        };
        nav.appendChild(prevBtn);
        nav.appendChild(nextBtn);
        card.appendChild(nav);

        card.onclick = () => logSession('exo');

        grid.appendChild(card);
    });
}

function renderNoushiPage() {
    renderNoushiTabs();
    renderNoushiGrid('tous');
}

function renderRelaxTabs() {
    const tabs = document.getElementById('relax-tabs');
    if (!tabs) return;
    tabs.innerHTML = '';

    const types = Array.from(new Set(RELAX_SESSIONS.map(r => r.type || 'relax')));
    ['tous', ...types].forEach(type => {
        const btn = document.createElement('button');
        btn.className = 'tab-btn';
        btn.textContent = type === 'tous' ? 'Tous' : type.toUpperCase();
        btn.onclick = () => {
            renderRelaxGrid(type);
        };
        if (type === 'tous') btn.classList.add('active');
        tabs.appendChild(btn);
    });
}

function renderRelaxGrid(filterType = 'tous') {
    const grid = document.getElementById('relax-grid');
    if (!grid) return;

    const search = document.getElementById('relax-search');
    const query = (search?.value || '').toLowerCase();

    let list = RELAX_SESSIONS.slice();
    if (filterType !== 'tous') {
        list = list.filter(r => (r.type || 'relax') === filterType);
    }
    if (query) {
        list = list.filter(r =>
            r.nom.toLowerCase().includes(query) ||
            (r.desc && r.desc.toLowerCase().includes(query))
        );
    }

    grid.innerHTML = '';

    if (list.length === 0) {
        grid.innerHTML = '<div class="empty-state"><div class="empty-state-icon">üßò‚Äç‚ôÇÔ∏è</div><div class="empty-state-text">Aucune s√©ance trouv√©e</div></div>';
        return;
    }

    list.forEach((seance, index) => {
        const card = document.createElement('div');
        card.className = 'card relax-card';

        const header = document.createElement('div');
        header.className = 'card-header';

        const title = document.createElement('div');
        title.className = 'card-title';
        title.textContent = seance.nom;

        const favBtn = document.createElement('button');
        favBtn.className = 'card-fav-btn';
        favBtn.innerHTML = isFavori('relax', seance.nom) ? '‚≠ê' : '‚òÜ';
        if (isFavori('relax', seance.nom)) {
            card.classList.add('favorited');
            favBtn.classList.add('active');
        }
        favBtn.onclick = (e) => {
            e.stopPropagation();
            toggleFavori('relax', seance.nom);
        };

        header.appendChild(title);
        header.appendChild(favBtn);

        const desc = document.createElement('div');
        desc.className = 'card-text';
        desc.textContent = seance.desc || '';

        card.appendChild(header);
        card.appendChild(desc);

        if (seance.steps && seance.steps.length) {
            const stepsDiv = document.createElement('div');
            stepsDiv.className = 'step-list';
            seance.steps.forEach((step, idx) => {
                const s = document.createElement('div');
                s.className = 'step-item';
                s.innerHTML = `<div class="step-number">${idx + 1}</div><div class="step-content">${step}</div>`;
                stepsDiv.appendChild(s);
            });
            card.appendChild(stepsDiv);
        }

        const nav = document.createElement('div');
        nav.className = 'card-nav';
        const prevBtn = document.createElement('button');
        prevBtn.className = 'nav-btn-prev';
        prevBtn.textContent = '‚óÄ Pr√©c√©dent';
        prevBtn.disabled = index === 0;
        prevBtn.onclick = (e) => {
            e.stopPropagation();
            if (index > 0) grid.children[index - 1].scrollIntoView({ behavior: 'smooth', block: 'start' });
        };
        const nextBtn = document.createElement('button');
        nextBtn.className = 'nav-btn-next';
        nextBtn.textContent = 'Suivant ‚ñ∂';
        nextBtn.disabled = index === list.length - 1;
        nextBtn.onclick = (e) => {
            e.stopPropagation();
            if (index < list.length - 1) grid.children[index + 1].scrollIntoView({ behavior: 'smooth', block: 'start' });
        };
        nav.appendChild(prevBtn);
        nav.appendChild(nextBtn);
        card.appendChild(nav);

        grid.appendChild(card);
    });
}

function renderRelaxPage() {
    renderRelaxTabs();
    renderRelaxGrid('tous');
}

function renderFavorisPage() {
    const grid = document.getElementById('favoris-grid');
    if (!grid) return;
    grid.innerHTML = '';

    const allCards = [];

    EXOS.forEach(exo => {
        if (isFavori('exos', exo.nom)) {
            allCards.push({ type: 'exo', nom: exo.nom, obj: exo });
        }
    });
    RECIPES.forEach(r => {
        if (isFavori('recipes', r.nom)) {
            allCards.push({ type: 'recipe', nom: r.nom, obj: r });
        }
    });
    NOUSHI_EXOS.forEach(e => {
        if (isFavori('noushi', e.nom)) {
            allCards.push({ type: 'noushi', nom: e.nom, obj: e });
        }
    });
    RELAX_SESSIONS.forEach(s => {
        if (isFavori('relax', s.nom)) {
            allCards.push({ type: 'relax', nom: s.nom, obj: s });
        }
    });

    if (allCards.length === 0) {
        grid.innerHTML = '<div class="empty-state"><div class="empty-state-icon">‚≠ê</div><div class="empty-state-text">Aucun favori pour l\'instant. Ajoute en cliquant sur ‚òÜ</div></div>';
        return;
    }

    allCards.forEach(item => {
        const card = document.createElement('div');
        card.className = 'card favorited';

        const header = document.createElement('div');
        header.className = 'card-header';

        const title = document.createElement('div');
        title.className = 'card-title';
        title.textContent = item.nom;

        const favBtn = document.createElement('button');
        favBtn.className = 'card-fav-btn active';
        favBtn.innerHTML = '‚≠ê';
        favBtn.onclick = (e) => {
            e.stopPropagation();
            toggleFavori(
                item.type === 'exo' ? 'exos' :
                item.type === 'recipe' ? 'recipes' :
                item.type === 'noushi' ? 'noushi' : 'relax',
                item.nom
            );
        };

        header.appendChild(title);
        header.appendChild(favBtn);

        const meta = document.createElement('div');
        meta.className = 'card-meta';
        meta.textContent = item.type.toUpperCase();

        card.appendChild(header);
        card.appendChild(meta);

        grid.appendChild(card);
    });
}

function updateTime() {
    const now = new Date();
    const timeEl = document.getElementById('time');
    const dateEl = document.getElementById('date');
    if (timeEl) {
        const h = String(now.getHours()).padStart(2, '0');
        const m = String(now.getMinutes()).padStart(2, '0');
        timeEl.textContent = `${h}:${m}`;
    }
    if (dateEl) {
        const jours = ['Dimanche', 'Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi'];
        const mois = ['Janvier', 'F√©vrier', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Ao√ªt', 'Septembre', 'Octobre', 'Novembre', 'D√©cembre'];
        const j = jours[now.getDay()];
        const d = now.getDate();
        const mo = mois[now.getMonth()];
        dateEl.textContent = `${j}, ${d} ${mo}`;
    }
}

function initBatteryAndTemp() {
    const batteryEl = document.getElementById('battery');
    const tempEl = document.getElementById('temp');

    if (navigator.getBattery || navigator.battery) {
        const batteryPromise = navigator.getBattery ? navigator.getBattery() : navigator.battery;
        if (batteryPromise && batteryPromise.then) {
            batteryPromise.then(b => {
                batteryEl.textContent = Math.round(b.level * 100);
                b.addEventListener('levelchange', () => {
                    batteryEl.textContent = Math.round(b.level * 100);
                });
            }).catch(() => {
                batteryEl.textContent = Math.floor(Math.random() * 30) + 70;
            });
        }
    } else {
        batteryEl.textContent = Math.floor(Math.random() * 30) + 70;
    }

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(pos => {
            const { latitude, longitude } = pos.coords;
            fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m&temperature_unit=celsius`)
                .then(r => r.json())
                .then(d => {
                    if (d.current) {
                        tempEl.textContent = Math.round(d.current.temperature_2m);
                    }
                })
                .catch(() => {
                    tempEl.textContent = Math.floor(Math.random() * 15) + 15;
                });
        }, () => {
            tempEl.textContent = Math.floor(Math.random() * 15) + 15;
        });
    } else {
        tempEl.textContent = Math.floor(Math.random() * 15) + 15;
    }
}

function attachSearchListeners() {
    const exosSearch = document.getElementById('exos-search');
    if (exosSearch) {
        exosSearch.addEventListener('input', () => renderExosGrid());
    }
    const recipesSearch = document.getElementById('recipes-search');
    if (recipesSearch) {
        recipesSearch.addEventListener('input', () => renderRecipesGrid('tous'));
    }
    const noushiSearch = document.getElementById('noushi-search');
    if (noushiSearch) {
        noushiSearch.addEventListener('input', () => renderNoushiGrid('tous'));
    }
    const relaxSearch = document.getElementById('relax-search');
    if (relaxSearch) {
        relaxSearch.addEventListener('input', () => renderRelaxGrid('tous'));
    }
}

function renderAllPages() {
    if (currentPage === 'exos') renderExosPage();
    if (currentPage === 'nutrition') renderRecipesPage();
    if (currentPage === 'noushi') renderNoushiPage();
    if (currentPage === 'relax') renderRelaxPage();
    if (currentPage === 'favoris') renderFavorisPage();
}

document.addEventListener('DOMContentLoaded', () => {
    loadFavoris();
    updateStats();

    renderExosPage();
    renderRecipesPage();
    renderNoushiPage();
    renderRelaxPage();
    attachSearchListeners();
    renderFavorisPage();

    updateTime();
    setInterval(updateTime, 30000);
    initBatteryAndTemp();
});
</script>
</body>
</html>
