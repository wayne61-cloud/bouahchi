<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Bouahchi Gor">
    <meta name="theme-color" content="#000000">
    <title>Bouahchi Gor - Fitness Compl√®te</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            width: 100%;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', sans-serif;
            background: #000;
            color: #fff;
            overflow: hidden;
            -webkit-user-select: none;
            user-select: none;
            position: fixed;
        }

        body {
            display: flex;
            flex-direction: column;
            padding: max(env(safe-area-inset-top), 8px) max(env(safe-area-inset-right), 8px) max(env(safe-area-inset-bottom), 8px) max(env(safe-area-inset-left), 8px);
        }

        /* HEADER */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 48px;
            background: linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 100%);
            border-bottom: 1px solid #222;
            margin: -8px -8px 0 -8px;
            padding: 8px 12px;
            flex-shrink: 0;
            z-index: 50;
        }

        .header-left, .header-right {
            font-size: 11px;
            color: #ff5252;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .header-title {
            font-weight: 800;
            font-size: 14px;
            letter-spacing: 0.5px;
            flex: 1;
            text-align: center;
        }

        /* CONTAINER */
        .container {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 0;
            -webkit-overflow-scrolling: touch;
            margin-bottom: 56px;
            scroll-behavior: smooth;
        }

        .page {
            display: none;
            width: 100%;
            min-height: 100%;
            padding: 16px 12px 32px 12px;
            animation: fadeIn 0.3s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* TOP NAV & TABS */
        .top-nav, .tabs {
            display: flex;
            gap: 6px;
            margin-bottom: 12px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            padding-bottom: 4px;
            scroll-snap-type: x mandatory;
        }

        .top-nav-btn, .tab-btn {
            padding: 8px 14px;
            border: 1px solid rgba(255, 82, 82, 0.3);
            background: rgba(255, 82, 82, 0.08);
            color: #ffcccc;
            border-radius: 20px;
            font-size: 11px;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            flex-shrink: 0;
            scroll-snap-align: start;
            font-weight: 500;
            -webkit-user-select: none;
            user-select: none;
        }

        .top-nav-btn:active, .tab-btn:active {
            transform: scale(0.95);
        }

        .top-nav-btn.active, .tab-btn.active {
            background: linear-gradient(135deg, #ff1744, #ff5252);
            color: #fff;
            border-color: #ff5252;
            box-shadow: 0 2px 8px rgba(255, 23, 68, 0.3);
        }

        /* LAUNCHER */
        .launcher {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: calc(100vh - 180px);
            padding: 20px 0;
        }

        .launcher-top {
            text-align: center;
        }

        .launcher-time {
            font-size: 48px;
            font-weight: 800;
            color: #ff5252;
            margin-bottom: 4px;
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
        }

        .launcher-date {
            font-size: 12px;
            color: #ff8a80;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .launcher-title {
            font-size: 28px;
            font-weight: 900;
            color: #fff;
            margin-bottom: 4px;
            letter-spacing: 1px;
        }

        .launcher-subtitle {
            font-size: 13px;
            color: #ffcccc;
            margin-bottom: 24px;
            font-style: italic;
        }

        .launcher-middle {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .launcher-btn {
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 700;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
            letter-spacing: 0.5px;
            -webkit-user-select: none;
            user-select: none;
        }

        .launcher-btn.primary {
            background: linear-gradient(135deg, #ff1744, #ff5252);
            box-shadow: 0 4px 16px rgba(255, 23, 68, 0.35);
        }

        .launcher-btn.primary:active {
            transform: scale(0.98);
            box-shadow: 0 2px 8px rgba(255, 23, 68, 0.25);
        }

        .launcher-btn.secondary {
            background: rgba(255, 82, 82, 0.12);
            border: 1.5px solid rgba(255, 82, 82, 0.5);
        }

        .launcher-btn.secondary:active {
            background: rgba(255, 82, 82, 0.18);
        }

        .launcher-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 20px;
        }

        .stat {
            padding: 12px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
            border-radius: 10px;
            border: 1px solid rgba(255, 82, 82, 0.2);
            text-align: center;
            font-size: 11px;
            color: #ffcccc;
            font-weight: 500;
        }

        .stat-value {
            font-size: 20px;
            font-weight: 800;
            color: #ff5252;
            margin-top: 4px;
        }

        /* SECTION */
        .section-title {
            font-size: 24px;
            font-weight: 900;
            color: #ff5252;
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }

        .section-sub {
            font-size: 12px;
            color: #ffcccc;
            margin-bottom: 16px;
            font-weight: 500;
        }

        /* SEARCH */
        .search-box {
            width: 100%;
            padding: 10px 14px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 82, 82, 0.3);
            border-radius: 10px;
            color: #fff;
            font-size: 13px;
            margin-bottom: 12px;
            outline: none;
            transition: all 0.2s;
            cursor: pointer;
        }

        .search-box:focus {
            background: rgba(255, 255, 255, 0.1);
            border-color: #ff5252;
            box-shadow: 0 0 8px rgba(255, 82, 82, 0.2);
        }

        .search-box::placeholder {
            color: #ff8a80;
        }

        /* GRID */
        .grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        /* CARD */
        .card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0.01));
            border: 1px solid rgba(255, 138, 128, 0.2);
            border-radius: 12px;
            padding: 14px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .card:active {
            transform: scale(0.98);
            border-color: rgba(255, 82, 82, 0.4);
        }

        .card.favorited {
            background: linear-gradient(135deg, rgba(255, 82, 82, 0.15), rgba(255, 82, 82, 0.08));
            border-color: rgba(255, 82, 82, 0.4);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .card-title {
            font-size: 14px;
            font-weight: 700;
            color: #ff8a80;
            flex: 1;
        }

        .card-fav-btn {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.2s;
            padding: 8px;
            margin: -8px -8px -8px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 44px;
            min-height: 44px;
            -webkit-user-select: none;
            user-select: none;
        }

        .card-fav-btn:active {
            opacity: 1;
            transform: scale(1.15);
        }

        .card-fav-btn.active {
            opacity: 1;
            transform: scale(1.2);
        }

        /* RECIPE IMAGE */
        .recipe-image {
            width: 100%;
            height: 200px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 12px;
            border: 1px solid rgba(255, 138, 128, 0.2);
            background: #1a1a1a;
        }

        .recipe-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .card-meta {
            font-size: 11px;
            color: #ffcccc;
            margin-bottom: 8px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .card-text {
            font-size: 11px;
            color: #ffebee;
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .card-section {
            background: rgba(255, 82, 82, 0.1);
            padding: 8px;
            border-radius: 6px;
            border-left: 2px solid #ff5252;
            margin-bottom: 8px;
        }

        .card-section-title {
            font-size: 11px;
            font-weight: 600;
            color: #ff8a80;
            margin-bottom: 4px;
        }

        .card-section-content {
            font-size: 10.5px;
            color: #ffebee;
            line-height: 1.6;
            white-space: pre-wrap;
            word-break: break-word;
        }

        .video-container {
            width: 100%;
            aspect-ratio: 16 / 9;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 8px;
            border: 1px solid rgba(255, 138, 128, 0.2);
            background: #1a1a1a;
        }

        .video-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .card-nav {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(255, 138, 128, 0.2);
        }

        .nav-btn-prev, .nav-btn-next {
            flex: 1;
            padding: 10px;
            border: 1px solid rgba(255, 82, 82, 0.5);
            background: rgba(255, 82, 82, 0.1);
            color: #ff5252;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .nav-btn-prev:active, .nav-btn-next:active {
            transform: scale(0.95);
        }

        .nav-btn-prev:disabled, .nav-btn-next:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        /* RELAX CARD */
        .relax-card {
            background: linear-gradient(135deg, rgba(100, 149, 237, 0.15), rgba(65, 105, 225, 0.08));
            border: 1px solid rgba(100, 149, 237, 0.4);
        }

        .relax-card .card-title {
            color: #6495ed;
        }

        /* NOUSHI CARD */
        .noushi-card {
            background: linear-gradient(135deg, rgba(255, 87, 34, 0.15), rgba(255, 152, 0, 0.08));
            border: 1px solid rgba(255, 87, 34, 0.4);
        }

        .noushi-card .card-title {
            color: #ff6e40;
        }

        /* NAV BOTTOM */
        .nav-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 56px;
            background: linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 100%);
            border-top: 1px solid #222;
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 0 -8px -8px -8px;
            padding-bottom: max(env(safe-area-inset-bottom), 4px);
            z-index: 1000;
        }

        .nav-btn {
            flex: 1;
            height: 48px;
            border: none;
            background: none;
            color: #666;
            font-size: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 3px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 0;
            -webkit-user-select: none;
            user-select: none;
        }

        .nav-btn.active {
            color: #ff5252;
            background: rgba(255, 82, 82, 0.1);
        }

        .nav-btn span:first-child {
            font-size: 20px;
        }

        /* SCROLLBAR */
        .container::-webkit-scrollbar {
            width: 4px;
        }

        .container::-webkit-scrollbar-thumb {
            background: rgba(255, 82, 82, 0.4);
            border-radius: 2px;
        }

        .container::-webkit-scrollbar-track {
            background: transparent;
        }

        /* EMPTY STATE */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #ffcccc;
        }

        .empty-state-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .empty-state-text {
            font-size: 13px;
        }

        /* RECIPE NUTRITION INFO */
        .recipe-nutrition {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 8px;
        }

        .nutrition-item {
            background: rgba(255, 82, 82, 0.08);
            padding: 8px;
            border-radius: 6px;
            border: 1px solid rgba(255, 82, 82, 0.2);
            text-align: center;
            font-size: 10px;
        }

        .nutrition-label {
            color: #ff8a80;
            font-weight: 600;
            display: block;
            margin-bottom: 2px;
        }

        .nutrition-value {
            color: #ffebee;
            font-weight: 700;
            font-size: 11px;
        }

        /* INGREDIENT LIST */
        .ingredient-list {
            background: rgba(255, 255, 255, 0.03);
            padding: 8px;
            border-radius: 6px;
            margin-bottom: 8px;
            border-left: 2px solid #ff5252;
        }

        .ingredient-item {
            font-size: 10.5px;
            color: #ffebee;
            padding: 3px 0;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .ingredient-item:before {
            content: "‚úì";
            color: #ff5252;
            font-weight: 700;
        }

        /* STEP LIST */
        .step-list {
            background: rgba(255, 255, 255, 0.03);
            padding: 8px;
            border-radius: 6px;
            margin-bottom: 8px;
            border-left: 2px solid #6495ed;
        }

        .step-item {
            font-size: 10.5px;
            color: #ffebee;
            padding: 4px 0;
            display: flex;
            gap: 6px;
        }

        .step-number {
            background: #6495ed;
            color: #000;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            font-weight: 700;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
            line-height: 1.4;
            margin-top: 2px;
        }
    </style>
</head>
<body>

<div class="header">
    <div class="header-left">üî• <span id="temp">--</span>¬∞</div>
    <div class="header-title">BOUAHCHI GOR</div>
    <div class="header-right">‚ö° <span id="battery">--</span>%</div>
</div>

<div class="container">
    <!-- HOME PAGE -->
    <div class="page active" id="home">
        <div class="launcher">
            <div class="launcher-top">
                <div class="launcher-time" id="time">00:00</div>
                <div class="launcher-date" id="date">Mercredi, 28 Janvier</div>
                <div class="launcher-title">BOUAHCHI GOR</div>
                <div class="launcher-subtitle">La montagne n'attend personne üèîÔ∏è</div>
            </div>
            <div class="launcher-middle">
                <button class="launcher-btn primary" id="btnMaison" onclick="chooseMode('maison')">üè† ENTRA√éNEMENT MAISON</button>
                <button class="launcher-btn primary" id="btnSalle" onclick="chooseMode('salle')">üí™ ENTRA√éNEMENT SALLE</button>
                <button class="launcher-btn primary" id="btnNutrition" onclick="goToPage('nutrition')">üçΩÔ∏è NUTRITION</button>
                <button class="launcher-btn primary" id="btnNoushi" onclick="goToPage('noushi')">üî• NOUSHI MODE</button>
                <button class="launcher-btn secondary" id="btnRelax" onclick="goToPage('relax')">üßò REPOS & RELAXATION</button>
            </div>
            <div class="launcher-stats">
                <div class="stat"><div>üéØ</div><div class="stat-value" id="statStreak">0</div></div>
                <div class="stat"><div>üçΩÔ∏è</div><div class="stat-value" id="statMeals">0</div></div>
                <div class="stat"><div>üí™</div><div class="stat-value" id="statSessions">0</div></div>
            </div>
        </div>
    </div>

    <!-- EXOS PAGE -->
    <div class="page" id="exos">
        <h1 class="section-title">üí™ ENTRA√éNEMENT</h1>
        <p class="section-sub" id="exos-sub">Choisis ton programme</p>
        <div class="top-nav" id="mode-nav"></div>
        <input type="text" class="search-box" id="exos-search" placeholder="üîç Cherche un exercice...">
        <div class="tabs" id="muscle-tabs"></div>
        <div class="grid" id="exos-grid"></div>
    </div>

    <!-- NUTRITION PAGE -->
    <div class="page" id="nutrition">
        <h1 class="section-title">üçΩÔ∏è NUTRITION</h1>
        <p class="section-sub">Recettes compl√®tes (2+ mois de vari√©t√©)</p>
        <input type="text" class="search-box" id="recipes-search" placeholder="üîç Cherche une recette...">
        <div class="tabs" id="meal-tabs"></div>
        <div class="grid" id="recipes-grid"></div>
    </div>

    <!-- NOUSHI PAGE -->
    <div class="page" id="noushi">
        <h1 class="section-title">üî• NOUSHI MODE</h1>
        <p class="section-sub">Les exos les plus extr√™mes (6-12 mois de progression)</p>
        <input type="text" class="search-box" id="noushi-search" placeholder="üîç Cherche une exo...">
        <div class="tabs" id="noushi-tabs"></div>
        <div class="grid" id="noushi-grid"></div>
    </div>

    <!-- RELAX PAGE -->
    <div class="page" id="relax">
        <h1 class="section-title">üßò RELAXATION</h1>
        <p class="section-sub">R√©cup√©ration compl√®te (yoga, m√©ditation, √©tirement)</p>
        <input type="text" class="search-box" id="relax-search" placeholder="üîç Cherche une s√©ance...">
        <div class="tabs" id="relax-tabs"></div>
        <div class="grid" id="relax-grid"></div>
    </div>

    <!-- FAVORIS PAGE -->
    <div class="page" id="favoris">
        <h1 class="section-title">‚ù§Ô∏è MES FAVORIS</h1>
        <p class="section-sub">Tes exos et recettes pr√©f√©r√©es</p>
        <div class="grid" id="favoris-grid"></div>
    </div>
</div>

<div class="nav-bottom">
    <button class="nav-btn active" id="navHome" onclick="goToPage('home')"><span>üè†</span><span>Home</span></button>
    <button class="nav-btn" id="navExos" onclick="goToPage('exos')"><span>üí™</span><span>Exos</span></button>
    <button class="nav-btn" id="navFood" onclick="goToPage('nutrition')"><span>üçΩÔ∏è</span><span>Food</span></button>
    <button class="nav-btn" id="navNoushi" onclick="goToPage('noushi')"><span>üî•</span><span>Noushi</span></button>
    <button class="nav-btn" id="navRelax" onclick="goToPage('relax')"><span>üßò</span><span>Relax</span></button>
    <button class="nav-btn" id="navFavoris" onclick="goToPage('favoris')"><span>‚ù§Ô∏è</span><span>Favoris</span></button>
</div>

<script>
// ============= VERIFIED YOUTUBE VIDEOS 2025-2026 =============
const YOUTUBE_VIDEOS = {
    'Pompes classiques': 'https://www.youtube.com/embed/y68UkKWkh08',
    'Pompes inclin√©es': 'https://www.youtube.com/embed/rtqbRn5tqrs',
    'Pompes d√©clin√©es': 'https://www.youtube.com/embed/1eccZxpmRsk',
    'Pompes serr√©es': 'https://www.youtube.com/embed/REjGhqa-63E',
    'Pompes explosives': 'https://www.youtube.com/embed/zGmCCtt2R48',
    'Pompes large √©cart': 'https://www.youtube.com/embed/mbdJlPnIhXQ',
    'Dips sur chaise': 'https://www.youtube.com/embed/PjVF-FF8JkU',
    'Curl √©lastique': 'https://www.youtube.com/embed/2KzSMYRXB-8',
    'Pompes triceps mur': 'https://www.youtube.com/embed/6q6OhfP33bk',
    'Dips sol chevilles': 'https://www.youtube.com/embed/bO5zK8AKkI4',
    'Punch en l\'air': 'https://www.youtube.com/embed/fRrQLI8pBLU',
    'Squat poids corps': 'https://www.youtube.com/embed/hNOGNlTKIYg',
    'Fentes avant': 'https://www.youtube.com/embed/1Ac8Z0RyDX4',
    'Fentes arri√®re': 'https://www.youtube.com/embed/7FADlBI9H_4',
    'Hip thrust canap√©': 'https://www.youtube.com/embed/RR0oZhhUVWo',
    'Squats pistol progression': 'https://www.youtube.com/embed/vq5-vdgJc0I',
    'Sauts box poids corps': 'https://www.youtube.com/embed/YwlXzR6txd8',
    'Planche classique': 'https://www.youtube.com/embed/b7LmuXITeVM',
    'Crunch au sol': 'https://www.youtube.com/embed/ylepxaWA0ng',
    'Planche lat√©rale': 'https://www.youtube.com/embed/fIkpxa-kuIA',
    'Relever jambes sol': 'https://www.youtube.com/embed/ECSl36lXRB0',
    'Bicycle crunch': 'https://www.youtube.com/embed/VaL7XWK3MVE',
    'Superman au sol': 'https://www.youtube.com/embed/dmaDOON5JBU',
    'Rowing √©lastique': 'https://www.youtube.com/embed/BI647VkG0iY',
    'Bird dog': 'https://www.youtube.com/embed/k2azbhhuKuM',
    'Squat barre': 'https://www.youtube.com/embed/J_Zm4XvE__s',
    'Presse cuisses': 'https://www.youtube.com/embed/h5NxegwgEkU',
    'Leg curl allong√©': 'https://www.youtube.com/embed/SbSNUXPRkc8',
    'Leg extension': 'https://www.youtube.com/embed/4ZDm5EbiFI8',
    'Fente barre salle': 'https://www.youtube.com/embed/VQoCfxPNpiU',
    'Hack squat machine': 'https://www.youtube.com/embed/u_1a0nWG7vQ',
    'D√©velopp√© couch√© barre': 'https://www.youtube.com/embed/SngodvMU0JA',
    'D√©velopp√© inclin√© barre': 'https://www.youtube.com/embed/RQ7U42i2DH4',
    'D√©velopp√© couch√© halt√®res': 'https://www.youtube.com/embed/UKSxlfZ9dm8',
    '√âcart√©s machine pec deck': 'https://www.youtube.com/embed/DtiDEA-UqwA',
    '√âcart√©s inclin√©s halt√®res': 'https://www.youtube.com/embed/FXr_JS4yVdA',
    'Push up d√©clin√© barre': 'https://www.youtube.com/embed/QBlYp-EwHlo',
    'Tractions large': 'https://www.youtube.com/embed/eGo4IYlbE5g',
    'Rowing barre': 'https://www.youtube.com/embed/_W377Z_TPxs',
    'Rowing halt√®res unilat√©ral': 'https://www.youtube.com/embed/10FJPoDm9gw',
    'Tirage vertical': 'https://www.youtube.com/embed/2Y4N2KoFg08',
    'Pull-over poulie': 'https://www.youtube.com/embed/nGOUrdqpwNs',
    'Rowing machine': 'https://www.youtube.com/embed/ij4095Oo1BA',
    'D√©velopp√© √©paules halt√®res': 'https://www.youtube.com/embed/CE9KiCPFw0E',
    '√âl√©vations lat√©rales halt√®res': 'https://www.youtube.com/embed/DC8ceKPj4TM',
    'Oiseau halt√®res inclin√©': 'https://www.youtube.com/embed/CqfSOJcvo04',
    '√âl√©vations frontales halt√®res': 'https://www.youtube.com/embed/B4KaLoOXl0Q',
    'Crunch poulie': 'https://www.youtube.com/embed/_z8OvPOl4yc',
    'Ab wheel rollout': 'https://www.youtube.com/embed/A3uK5TPzHq8',
    'Relev√©s jambes barre': 'https://www.youtube.com/embed/LxNxg8VATOg',
    'One Arm Pull-up': 'https://www.youtube.com/embed/zoOC1BIriAU',
    'Muscle Up': 'https://www.youtube.com/embed/dgJsU_JWD_w',
    'Front Lever Hold': 'https://www.youtube.com/embed/srMJ0FvF-6s',
    'Handstand Push-up': 'https://www.youtube.com/embed/qbRbM6d5ddM',
    'Pistol Squat (1 jambe)': 'https://www.youtube.com/embed/snNPOu6KeAI',
};

// ============= DATA EXERCICES =============
const EXOS = [
    { nom: 'Pompes classiques', pole: 'maison', muscle: 'poitrine', desc: 'Fondamental poids du corps', prep: 'Mains largeur √©paules, corps droit, descendre 2-3cm sol, remonter explosif. 3x10-15 reps.', tips: 'Core engag√©, pas de creusement dos.' },
    { nom: 'Pompes inclin√©es', pole: 'maison', muscle: 'poitrine', desc: 'Pour d√©butants', prep: 'Mains surface √©lev√©e (chaise), m√™me technique. 3x8-12 reps', tips: 'Progression vers pompes normales.' },
    { nom: 'Pompes d√©clin√©es', pole: 'maison', muscle: 'poitrine', desc: 'Pectoraux hauts', prep: 'Pieds sur√©lev√©s, mains sol. 3x6-10 reps', tips: 'Sollicite haut poitrine.' },
    { nom: 'Pompes serr√©es', pole: 'maison', muscle: 'bras', desc: 'Focus triceps', prep: 'Mains rapproch√©es, coudes pr√®s corps. 3x8-12 reps', tips: 'Triceps br√ªlent.' },
    { nom: 'Pompes explosives', pole: 'maison', muscle: 'poitrine', desc: 'Pliom√©trique puissance', prep: 'Pompes rapides, applaudir si possible. 3x5-8 reps.', tips: 'Progresser d\'abord avec normales.' },
    { nom: 'Pompes large √©cart', pole: 'maison', muscle: 'poitrine', desc: 'Pectoraux isolement', prep: 'Mains tr√®s √©cart√©es (1.5x √©paules). 3x10-12 reps', tips: '√âtirement pec maximal.' },
    { nom: 'Dips sur chaise', pole: 'maison', muscle: 'bras', desc: 'Triceps intense', prep: 'Mains chaise derri√®re, pieds devant, plier 90¬∞. 3x8-12 reps', tips: 'Contr√¥ler descente.' },
    { nom: 'Curl √©lastique', pole: 'maison', muscle: 'bras', desc: 'Biceps isolement', prep: '√âlastique sous pieds, flexion bras. 3x12-15 reps', tips: 'Tension constante.' },
    { nom: 'Pompes triceps mur', pole: 'maison', muscle: 'bras', desc: 'Triceps approche mur', prep: 'Face mur, pompes en arri√®re angle 45¬∞. 3x10-12 reps', tips: 'Bonne progression.' },
    { nom: 'Dips sol chevilles', pole: 'maison', muscle: 'bras', desc: 'Triceps sol variant', prep: 'Sol comme support, plier bras 90¬∞. 3x8-10 reps', tips: 'Moins intense que chaise.' },
    { nom: 'Punch en l\'air', pole: 'maison', muscle: 'bras', desc: 'Bras cardio puissance', prep: '100 punches rapides, repos, r√©p√©ter 3x', tips: 'C≈ìur monte aussi.' },
    { nom: 'Squat poids corps', pole: 'maison', muscle: 'jambes', desc: 'Jambes fondamental', prep: 'Pieds largeur √©paules, descendre profond. 3x15-20 reps', tips: 'Genoux tracking, talons sol.' },
    { nom: 'Fentes avant', pole: 'maison', muscle: 'jambes', desc: 'Unilat√©ral puissant', prep: 'Pied avant, fl√©chir deux jambes. 3x10 chaque', tips: 'Balance et force.' },
    { nom: 'Fentes arri√®re', pole: 'maison', muscle: 'jambes', desc: 'Moins stress genou', prep: 'Pied arri√®re, fl√©chir. 3x10 chaque', tips: 'Excellent quadriceps.' },
    { nom: 'Hip thrust canap√©', pole: 'maison', muscle: 'jambes', desc: 'Fessiers intense', prep: 'Dos canap√©, pousser hanches. 3x12 reps', tips: 'Contraction max haut.' },
    { nom: 'Squats pistol progression', pole: 'maison', muscle: 'jambes', desc: 'Squat 1 jambe d√©butant', prep: 'Avec support main, 1 jambe. 3x5-8 chaque', tips: 'Tr√®s difficile, progresser.' },
    { nom: 'Sauts box poids corps', pole: 'maison', muscle: 'jambes', desc: 'Jambes cardio plyom√©trique', prep: 'Sauts sur place maximaux. 3x10-15 reps', tips: '√ânergie max.' },
    { nom: 'Planche classique', pole: 'maison', muscle: 'abdos', desc: 'Core statique', prep: 'Position pompes, maintenir droit. 3x30-60 sec', tips: 'Pas creuser dos.' },
    { nom: 'Crunch au sol', pole: 'maison', muscle: 'abdos', desc: 'Isolement abs', prep: 'Genoux fl√©chis, soulever √©paules. 3x15-20 reps', tips: 'Pas tirer t√™te.' },
    { nom: 'Planche lat√©rale', pole: 'maison', muscle: 'abdos', desc: 'Obliques core', prep: 'Sur coude, corps droit, maintenir. 3x30-45 sec chaque', tips: 'Tr√®s intense.' },
    { nom: 'Relever jambes sol', pole: 'maison', muscle: 'abdos', desc: 'Abdos bas intense', prep: 'Allong√©, lever jambes 90¬∞, baisser sans toucher. 3x12-15 reps', tips: 'Abs br√ªlent.' },
    { nom: 'Bicycle crunch', pole: 'maison', muscle: 'abdos', desc: 'Abdos + obliques', prep: 'Allong√©, genoux fl√©chis, alternance coude-genou. 3x20 reps', tips: 'Mouvement continu fluide.' },
    { nom: 'Superman au sol', pole: 'maison', muscle: 'dos', desc: 'Dos extenseurs', prep: 'Allong√©, soulever bras/jambes. 3x12 reps', tips: 'Contraction lombaires.' },
    { nom: 'Rowing √©lastique', pole: 'maison', muscle: 'dos', desc: 'Dos sans mat√©riel', prep: '√âlastique fix√©, tirer vers soi. 3x12-15 reps', tips: 'Tension constante.' },
    { nom: 'Bird dog', pole: 'maison', muscle: 'dos', desc: 'Stabilit√© colonne', prep: '4 pattes, √©tendre bras/jambe oppos√©s. 3x10 chaque', tips: 'Dos neutre, core engag√©.' },
    { nom: 'Squat barre', pole: 'salle', muscle: 'jambes', desc: 'Roi force jambes', prep: 'Barre √©paules, squat parall√®le. 4x6-8 reps lourds', tips: 'Cha√Æne compl√®te.' },
    { nom: 'Presse cuisses', pole: 'salle', muscle: 'jambes', desc: 'Sans charge dos', prep: 'Pieds plateau, pousser extension. 3x10-12 reps', tips: 'Isolement quads.' },
    { nom: 'Leg curl allong√©', pole: 'salle', muscle: 'jambes', desc: 'Ischio-jambiers', prep: 'Allong√©, fl√©chir jambes rouleau. 3x12-15 reps', tips: 'Cha√Æne post√©rieure.' },
    { nom: 'Leg extension', pole: 'salle', muscle: 'jambes', desc: 'Quadriceps pur', prep: 'Assis, √©tendre jambes rouleau. 3x12-15 reps', tips: 'Contr√¥l√©, risque genou l√©ger.' },
    { nom: 'Fente barre salle', pole: 'salle', muscle: 'jambes', desc: 'Fentes lourdes', prep: 'Barre √©paules, fente poids. 3x8-10 chaque', tips: 'Tr√®s intense.' },
    { nom: 'Hack squat machine', pole: 'salle', muscle: 'jambes', desc: 'Squat variant salle', prep: '√âpaules supports, squat. 3x10-12 reps', tips: 'Moins demandant que barre.' },
    { nom: 'D√©velopp√© couch√© barre', pole: 'salle', muscle: 'poitrine', desc: 'Roi poitrine salle', prep: 'Allong√©, barre poitrine, pousser. 4x6-8 reps', tips: '√âpaules arri√®re.' },
    { nom: 'D√©velopp√© inclin√© barre', pole: 'salle', muscle: 'poitrine', desc: 'Haut poitrine', prep: 'Banc inclin√© 30-45¬∞, pousser. 3x8-10 reps', tips: 'Moins lourd que plat.' },
    { nom: 'D√©velopp√© couch√© halt√®res', pole: 'salle', muscle: 'poitrine', desc: 'Amplitude plus grande', prep: 'Halt√®res, descendre bas. 3x8-10 reps', tips: 'Plus sensation.' },
    { nom: '√âcart√©s machine pec deck', pole: 'salle', muscle: 'poitrine', desc: 'Isolement pure', prep: 'Poign√©es mains, √©carter avant. 3x12-15 reps', tips: 'Parfait isolement.' },
    { nom: '√âcart√©s inclin√©s halt√®res', pole: 'salle', muscle: 'poitrine', desc: 'Haut poitrine isolement', prep: 'Banc inclin√©, halt√®res √©carter. 3x10-12 reps', tips: 'Sensation haut pec.' },
    { nom: 'Push up d√©clin√© barre', pole: 'salle', muscle: 'poitrine', desc: 'Pompes barre lourdes', prep: 'Barre hauteur poitrine, pompes. 3x8-10 reps', tips: 'Pecs maximales.' },
    { nom: 'Tractions large', pole: 'salle', muscle: 'dos', desc: 'Grand dorsal pur', prep: 'Mains √©cart√©es, tirer corps. 3x5-8 reps', tips: 'Full range.' },
    { nom: 'Rowing barre', pole: 'salle', muscle: 'dos', desc: 'Tirage horizontal', prep: 'Pench√©, barre poitrine, coudes pr√®s corps. 3x8-10 reps', tips: 'Dos plat, tirer dos.' },
    { nom: 'Rowing halt√®res unilat√©ral', pole: 'salle', muscle: 'dos', desc: 'Unilat√©ral balance', prep: 'Une main banc, halt√®re. 3x10 chaque', tips: '√âquilibre musculaire.' },
    { nom: 'Tirage vertical', pole: 'salle', muscle: 'dos', desc: 'Variante tractions', prep: 'Poulie dessus, tirer poitrine. 3x8-10 reps', tips: 'Bon √©chauffement.' },
    { nom: 'Pull-over poulie', pole: 'salle', muscle: 'dos', desc: 'Grand dorsal isolement', prep: 'Corde poulie, tirer bas-arri√®re. 3x12 reps', tips: 'Sensation √©tirement.' },
    { nom: 'Rowing machine', pole: 'salle', muscle: 'dos', desc: 'Dos cardio force', prep: 'Damping 8, puissance maximale. 3x1min sprint', tips: 'Cardio + force dos.' },
    { nom: 'D√©velopp√© √©paules halt√®res', pole: 'salle', muscle: 'epaules', desc: 'Force compl√®te √©paules', prep: 'Assis, halt√®res √©paules, pousser haut. 3x8-10 reps', tips: 'Core engag√©.' },
    { nom: '√âl√©vations lat√©rales halt√®res', pole: 'salle', muscle: 'epaules', desc: 'Faisceau moyen', prep: 'Debout, halt√®res c√¥t√©s, lever lat√©ral. 3x12-15 reps l√©ger', tips: 'Pas d\'√©lan.' },
    { nom: 'Oiseau halt√®res inclin√©', pole: 'salle', muscle: 'epaules', desc: 'Arri√®re √©paule haut dos', prep: 'Banc inclin√© pench√©, √©carter halt√®res. 3x12-15 reps', tips: 'Isolation compl√®te.' },
    { nom: '√âl√©vations frontales halt√®res', pole: 'salle', muscle: 'epaules', desc: 'Faisceau avant', prep: 'Debout, halt√®res devant cuisses, lever. 3x12 reps', tips: 'Contr√¥le constant.' },
    { nom: 'Crunch poulie', pole: 'salle', muscle: 'abdos', desc: 'Abdos r√©sistance', prep: '√Ä genoux, crunch bas. 3x12-15 reps', tips: 'Charge progressive.' },
    { nom: 'Ab wheel rollout', pole: 'salle', muscle: 'abdos', desc: 'Avanc√© core', prep: 'Roulette, √©tendre corps. 3x8-12 reps', tips: 'Progresser genoux d\'abord.' },
    { nom: 'Relev√©s jambes barre', pole: 'salle', muscle: 'abdos', desc: 'Abdos bas intense', prep: 'Suspendu, relever jambes 90¬∞. 3x10-12 reps', tips: 'Tr√®s efficace.' },
];

// ============= DATA RECETTES COMPL√àTES AVEC IMAGES CORRIG√âES =============
const RECIPES_DATA = [
    {
        repas: 'petit-dej',
        nom: 'Pudding chia fraise prot√©in√©',
        temps: 15,
        prot: 20,
        cal: 280,
        benefices: 'Petit-d√©j prot√©in√© parfait, sans cuisson. Riche en om√©ga-3 et fibres.',
        image: 'https://images.unsplash.com/photo-1590080876-b4ccd4c37d5e?w=400&h=300&fit=crop',
        ingredients: [
            '40g graines de chia',
            '200ml lait demi-√©cr√©m√©',
            '80g yaourt grec nature',
            '100g fraises fraiches',
            '10ml miel brut',
            'Pinc√©e de vanille',
            '5g granola (optionnel)'
        ],
        preparation: [
            'La veille: Verser le lait dans un verre ou un bol.',
            'Ajouter les graines de chia et bien m√©langer (√©viter les grumeaux).',
            'Incorporer le yaourt grec et la vanille.',
            'Laisser reposer au r√©frig√©rateur minimum 4 heures (ou toute la nuit).',
            'Le matin: Ajouter les fraises fra√Æches coup√©es en morceaux.',
            'Verser le miel par-dessus.',
            'Garnir avec du granola si souhait√©.',
            'M√©langer l√©g√®rement et d√©guster frais.'
        ]
    },
    {
        repas: 'petit-dej',
        nom: 'Pancakes vegan banane',
        temps: 30,
        prot: 12,
        cal: 320,
        benefices: '√ânergie durable pr√©-s√©ance, sans ≈ìufs ni produits laitiers.',
        image: 'https://images.unsplash.com/photo-1490025195234-efedee1c5218?w=400&h=300&fit=crop',
        ingredients: [
            '2 bananes m√ªres √©cras√©es',
            '150ml lait v√©g√©tal (amande, soja ou avoine)',
            '150g farine blanche ou compl√®te',
            '5g levure chimique',
            'Pinc√©e de sel marin',
            '5ml huile de coco',
            '5ml vanille liquide',
            '30g sirop d\'√©rable'
        ],
        preparation: [
            '√âcraser les 2 bananes m√ªres √† la fourchette jusqu\'√† obtenir une pur√©e lisse.',
            'Ajouter le lait v√©g√©tal progressivement en m√©langeant.',
            'Dans un autre bol, verser la farine, levure, sel et vanille.',
            'M√©langer les ingr√©dients secs √† la fourchette.',
            'Verser le m√©lange humide sur le sec et m√©langer jusqu\'√† homog√©n√©it√© (quelques grumeaux OK).',
            'Chauffer l\'huile de coco √† feu moyen dans une po√™le antiadh√©sive.',
            'Verser des petites portions de p√¢te et cuire 2-3 minutes jusqu\'√† l√©ger dorage.',
            'Retourner d√©licatement et cuire 2-3 minutes de l\'autre c√¥t√©.',
            'Servir avec le sirop d\'√©rable et des fruits frais.'
        ]
    },
    {
        repas: 'petit-dej',
        nom: '≈íufs brouill√©s + toast complet',
        temps: 10,
        prot: 18,
        cal: 280,
        benefices: 'Prot√©ines simples et rapides √† pr√©parer. Tr√®s rassasiant.',
        image: 'https://images.unsplash.com/photo-1541519227354-08fa5d50c44d?w=400&h=300&fit=crop',
        ingredients: [
            '3 ≈ìufs fermiers',
            '2 tranches pain complet riche en fibres',
            '10g beurre doux',
            'Sel marin au go√ªt',
            'Poivre noir moulu',
            'Herbes fra√Æches (persil, ciboulette optionnel)'
        ],
        preparation: [
            'Casser les 3 ≈ìufs dans un bol et battre l√©g√®rement avec une fourchette.',
            'Verser le beurre dans une po√™le √† feu moyen-bas.',
            'Laisser fondre le beurre sans le br√ªler (attendez un l√©ger sifflement).',
            'Verser les ≈ìufs battus dans la po√™le.',
            'M√©langer lentement et continuellement avec une spatule en bois, 4-5 minutes.',
            'Les ≈ìufs doivent rester moelleux et ne pas cuire trop longtemps.',
            'Assaisonner avec sel et poivre noir. Ajouter les herbes fra√Æches.',
            'Toaster les 2 tranches de pain complet 2-3 minutes au grille-pain.',
            'Servir les ≈ìufs brouill√©s sur ou √† c√¥t√© du toast chaud.'
        ]
    },
    {
        repas: 'petit-dej',
        nom: 'Smoothie prot√©in√© miel',
        temps: 5,
        prot: 25,
        cal: 300,
        benefices: 'Rapide absorption pr√©-entra√Ænement. Excellent pour le muscle.',
        image: 'https://images.unsplash.com/photo-1590080875515-8a3a8dc5f156?w=400&h=300&fit=crop',
        ingredients: [
            '1 banane moyenne fra√Æche',
            '250ml lait demi-√©cr√©m√© froid',
            '35g whey prot√©ine saveur chocolat ou neutre',
            '15ml miel liquide pur',
            '50g avoine flocons',
            '1 poign√©e gla√ßons',
            'Facultatif: 10g cacahu√®te poudre'
        ],
        preparation: [
            'Verser le lait froid dans le mixeur.',
            'Ajouter la banane coup√©e en rondelles.',
            'Verser la poudre de whey prot√©ine.',
            'Ajouter le miel et l\'avoine flocons.',
            'Ajouter les gla√ßons (environ 5-6 gla√ßons).',
            'Facultatif: Ajouter la poudre de cacahu√®te.',
            'Mixer √† vitesse √©lev√©e pendant 30-45 secondes.',
            'Verser dans un verre haute et d√©guster imm√©diatement.',
            'Note: Plus les gla√ßons sont nombreux, plus le smoothie sera √©pais et froid.'
        ]
    },
    {
        repas: 'petit-dej',
        nom: 'Oeufs √† la coque tomate',
        temps: 8,
        prot: 16,
        cal: 200,
        benefices: 'L√©ger, rapide et riche en min√©raux. Parfait petit-d√©j l√©ger.',
        image: 'https://images.unsplash.com/photo-1539755519065-edc15cfdaae4?w=400&h=300&fit=crop',
        ingredients: [
            '2 ≈ìufs bio fermiers',
            '150g tomate cerise fra√Æche',
            '1 tranche pain complet',
            '5g beurre doux',
            'Sel de Gu√©rande',
            'Poivre noir',
            '5ml huile olive vierge extra',
            'Basilic frais (optionnel)'
        ],
        preparation: [
            'Remplir une casserole d\'eau et la faire bouillir.',
            'Plonger d√©licatement les 2 ≈ìufs dans l\'eau fr√©missante.',
            'Laisser cuire 4-5 minutes pour des ≈ìufs √† la coque (blanc cuit, jaune liquide).',
            'Pendant ce temps, laver les tomates cerise et les couper en deux.',
            'Verser l\'huile olive dans une petite po√™le.',
            'Ajouter les tomates cerise et laisser cuire 2-3 minutes.',
            'Assaisonner avec sel, poivre et basilic frais.',
            'Toaster la tranche de pain complet.',
            'Retirer les ≈ìufs de l\'eau bouillante avec une cuill√®re.',
            'Placer les ≈ìufs dans des coquetiers.',
            'Servir avec le pain grill√© beurr√© et les tomates saut√©es.'
        ]
    }
];

// ============= NOUSHI DATA =============
const NOUSHI_DATA = [
    { nom: 'Pompes explosives inclin√©es', cat: 'chest', desc: 'Plyom√©trique avanc√©', prep: 'Pompes explosives sur surface instable. 4x5 reps.' },
    { nom: 'Handstand Hold', cat: 'strength', desc: '√âquilibre force extr√™me', prep: 'Tenir √©quilibre t√™te √† terre. 5x20-30 sec.' },
    { nom: 'Front Lever Progressions', cat: 'strength', desc: 'Statique force ultime', prep: 'Lever avant suspendu. 5x10-15 sec.' },
];

// ============= RELAX DATA =============
const RELAX_DATA = [
    { nom: 'Yoga alignement complet', desc: 'Full body recovery', dur√©e: '45 min' },
    { nom: 'M√©ditation pleine conscience', desc: 'Mental clarity zen', dur√©e: '20 min' },
    { nom: 'Stretching profond', desc: 'Mobilit√© articulations', dur√©e: '30 min' },
];

// ============= VARIABLES GLOBALES =============
let currentMode = null;
let favorites = JSON.parse(localStorage.getItem('favorites')) || [];

// ============= FONCTIONS UTILITAIRES =============
function goToPage(pageName) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(pageName).classList.add('active');
    
    document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
    if (pageName === 'home') document.getElementById('navHome').classList.add('active');
    else if (pageName === 'exos') document.getElementById('navExos').classList.add('active');
    else if (pageName === 'nutrition') document.getElementById('navFood').classList.add('active');
    else if (pageName === 'noushi') document.getElementById('navNoushi').classList.add('active');
    else if (pageName === 'relax') document.getElementById('navRelax').classList.add('active');
    else if (pageName === 'favoris') document.getElementById('navFavoris').classList.add('active');
    
    document.querySelector('.container').scrollTop = 0;
}

function chooseMode(mode) {
    currentMode = mode;
    goToPage('exos');
    renderExos();
}

function createExoCard(exo, isNutrition = false) {
    const div = document.createElement('div');
    div.className = 'card';
    const isFav = favorites.includes(exo.nom);
    
    div.innerHTML = `
        <div class="card-header">
            <div class="card-title">${exo.nom}</div>
            <button class="card-fav-btn ${isFav ? 'active' : ''}" data-name="${exo.nom}" onclick="toggleFav(event, '${exo.nom}')">
                ${isFav ? '‚ù§Ô∏è' : 'ü§ç'}
            </button>
        </div>
        <p class="card-text">${exo.desc}</p>
        ${exo.image ? `<div class="recipe-image"><img src="${exo.image}" alt="${exo.nom}"></div>` : ''}
        <div class="card-meta">
            ${exo.temps ? `‚è±Ô∏è ${exo.temps}min` : ''}
            ${exo.muscle ? `üí™ ${exo.muscle}` : ''}
            ${exo.prot ? `ü•ö ${exo.prot}g prot√©ines` : ''}
            ${exo.cal ? `üî• ${exo.cal}cal` : ''}
        </div>
        ${exo.benefices ? `<div class="card-section"><div class="card-section-title">B√©n√©fices</div><div class="card-section-content">${exo.benefices}</div></div>` : ''}
        ${exo.prep ? `<div class="card-section"><div class="card-section-title">Pr√©paration/Ex√©cution</div><div class="card-section-content">${exo.prep}</div></div>` : ''}
        ${exo.tips ? `<div class="card-section"><div class="card-section-title">Tips</div><div class="card-section-content">${exo.tips}</div></div>` : ''}
        ${exo.ingredients ? `<div class="ingredient-list">${exo.ingredients.map(ing => `<div class="ingredient-item">${ing}</div>`).join('')}</div>` : ''}
        ${exo.preparation ? `<div class="step-list">${exo.preparation.map((step, i) => `<div class="step-item"><div class="step-number">${i+1}</div><div class="step-content">${step}</div></div>`).join('')}</div>` : ''}
        ${YOUTUBE_VIDEOS[exo.nom] ? `<div class="video-container"><iframe src="${YOUTUBE_VIDEOS[exo.nom]}" allowfullscreen></iframe></div>` : ''}
    `;
    
    return div;
}

function toggleFav(event, name) {
    event.stopPropagation();
    const idx = favorites.indexOf(name);
    if (idx > -1) {
        favorites.splice(idx, 1);
    } else {
        favorites.push(name);
    }
    localStorage.setItem('favorites', JSON.stringify(favorites));
    renderAllPages();
}

function renderExos() {
    const grid = document.getElementById('exos-grid');
    const filtered = EXOS.filter(e => e.pole === currentMode);
    
    const muscleGroups = [...new Set(filtered.map(e => e.muscle))];
    const muscleTabs = document.getElementById('muscle-tabs');
    muscleTabs.innerHTML = '';
    
    muscleGroups.forEach(muscle => {
        const btn = document.createElement('button');
        btn.className = 'tab-btn' + (muscle === 'poitrine' ? ' active' : '');
        btn.textContent = muscle.charAt(0).toUpperCase() + muscle.slice(1);
        btn.addEventListener('click', function() {
            document.querySelectorAll('#muscle-tabs .tab-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            filterAndRender();
        });
        muscleTabs.appendChild(btn);
    });
    
    const searchBox = document.getElementById('exos-search');
    searchBox.addEventListener('input', filterAndRender);
    
    function filterAndRender() {
        const activeTab = document.querySelector('#muscle-tabs .tab-btn.active');
        const selectedMuscle = activeTab.textContent.toLowerCase();
        const searchTerm = searchBox.value.toLowerCase();
        
        const filtered = EXOS.filter(e => 
            e.pole === currentMode && 
            e.muscle === selectedMuscle &&
            e.nom.toLowerCase().includes(searchTerm)
        );
        
        grid.innerHTML = '';
        filtered.forEach(exo => grid.appendChild(createExoCard(exo)));
    }
    
    filterAndRender();
}

function renderNutrition() {
    const grid = document.getElementById('recipes-grid');
    const tabs = document.getElementById('meal-tabs');
    
    const mealTypes = [...new Set(RECIPES_DATA.map(r => r.repas))];
    tabs.innerHTML = '';
    
    mealTypes.forEach(meal => {
        const btn = document.createElement('button');
        btn.className = 'tab-btn' + (meal === 'petit-dej' ? ' active' : '');
        btn.textContent = meal === 'petit-dej' ? 'Petit-d√©j' : meal.charAt(0).toUpperCase() + meal.slice(1);
        btn.addEventListener('click', function() {
            document.querySelectorAll('#meal-tabs .tab-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            filterAndRender();
        });
        tabs.appendChild(btn);
    });
    
    const searchBox = document.getElementById('recipes-search');
    searchBox.addEventListener('input', filterAndRender);
    
    function filterAndRender() {
        const activeTab = document.querySelector('#meal-tabs .tab-btn.active');
        const selectedMeal = activeTab.textContent === 'Petit-d√©j' ? 'petit-dej' : activeTab.textContent.toLowerCase();
        const searchTerm = searchBox.value.toLowerCase();
        
        const filtered = RECIPES_DATA.filter(r => 
            r.repas === selectedMeal &&
            r.nom.toLowerCase().includes(searchTerm)
        );
        
        grid.innerHTML = '';
        filtered.forEach(recipe => grid.appendChild(createExoCard(recipe, true)));
    }
    
    filterAndRender();
}

function renderNoushi() {
    const grid = document.getElementById('noushi-grid');
    const searchBox = document.getElementById('noushi-search');
    
    searchBox.addEventListener('input', filterAndRender);
    
    function filterAndRender() {
        const searchTerm = searchBox.value.toLowerCase();
        const filtered = NOUSHI_DATA.filter(n => n.nom.toLowerCase().includes(searchTerm));
        
        grid.innerHTML = '';
        filtered.forEach(noushi => grid.appendChild(createExoCard(noushi)));
    }
    
    filterAndRender();
}

function renderRelax() {
    const grid = document.getElementById('relax-grid');
    const searchBox = document.getElementById('relax-search');
    
    searchBox.addEventListener('input', filterAndRender);
    
    function filterAndRender() {
        const searchTerm = searchBox.value.toLowerCase();
        const filtered = RELAX_DATA.filter(r => r.nom.toLowerCase().includes(searchTerm));
        
        grid.innerHTML = '';
        filtered.forEach(relax => {
            const div = document.createElement('div');
            div.className = 'card relax-card';
            const isFav = favorites.includes(relax.nom);
            div.innerHTML = `
                <div class="card-header">
                    <div class="card-title">${relax.nom}</div>
                    <button class="card-fav-btn ${isFav ? 'active' : ''}" data-name="${relax.nom}" onclick="toggleFav(event, '${relax.nom}')">
                        ${isFav ? '‚ù§Ô∏è' : 'ü§ç'}
                    </button>
                </div>
                <p class="card-text">${relax.desc}</p>
                <div class="card-meta">‚è±Ô∏è ${relax.dur√©e}</div>
            `;
            grid.appendChild(div);
        });
    }
    
    filterAndRender();
}

function renderFavoris() {
    const grid = document.getElementById('favoris-grid');
    grid.innerHTML = '';
    
    if (favorites.length === 0) {
        grid.innerHTML = `<div class="empty-state"><div class="empty-state-icon">üíî</div><div class="empty-state-text">Aucun favoris pour l'instant. Ajoute des exos et recettes !</div></div>`;
        return;
    }
    
    const allItems = [...EXOS, ...RECIPES_DATA, ...NOUSHI_DATA, ...RELAX_DATA];
    const favItems = allItems.filter(item => favorites.includes(item.nom));
    
    favItems.forEach(item => {
        if (RELAX_DATA.some(r => r.nom === item.nom)) {
            const div = document.createElement('div');
            div.className = 'card relax-card';
            div.innerHTML = `
                <div class="card-header">
                    <div class="card-title">${item.nom}</div>
                    <button class="card-fav-btn active" onclick="toggleFav(event, '${item.nom}')">
                        ‚ù§Ô∏è
                    </button>
                </div>
                <p class="card-text">${item.desc}</p>
                <div class="card-meta">‚è±Ô∏è ${item.dur√©e}</div>
            `;
            grid.appendChild(div);
        } else {
            grid.appendChild(createExoCard(item));
        }
    });
}

function renderAllPages() {
    if (document.getElementById('nutrition').classList.contains('active')) renderNutrition();
    if (document.getElementById('exos').classList.contains('active')) renderExos();
    if (document.getElementById('noushi').classList.contains('active')) renderNoushi();
    if (document.getElementById('relax').classList.contains('active')) renderRelax();
    if (document.getElementById('favoris').classList.contains('active')) renderFavoris();
}

// ============= INIT TIME & BATTERY =============
function updateTimeAndBattery() {
    const now = new Date();
    document.getElementById('time').textContent = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
    document.getElementById('date').textContent = now.toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long' });
    
    if (navigator.getBattery) {
        navigator.getBattery().then(battery => {
            document.getElementById('battery').textContent = Math.round(battery.level * 100);
        });
    }
}

// ============= EVENT LISTENERS POUR IOS FIX =============
document.addEventListener('DOMContentLoaded', () => {
    updateTimeAndBattery();
    setInterval(updateTimeAndBattery, 60000);
    
    // Fix iOS event handling
    document.addEventListener('touchstart', () => {}, false);
    document.addEventListener('touchend', () => {}, false);
    document.addEventListener('touchcancel', () => {}, false);
    
    // Ajouter cursor pointer √† tous les boutons
    document.querySelectorAll('button, .card, .tab-btn, .top-nav-btn').forEach(el => {
        el.style.cursor = 'pointer';
    });
});
</script>

</body>
</html>
